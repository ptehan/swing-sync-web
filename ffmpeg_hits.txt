dist\assets\index-BetTNchG.js:`).replace(Ty,"")}function Qr(t,l){return l=Xr(l),Xr(t)===l}function Mn(){}function zt(t,l,e,a,u,n){switch(e){case"children":typeof a=="string"?l==="body"||l==="textarea"&&a===""||Pe(t,a):(typeof a=="number"||typeof a=="bigint")&&l!=="body"&&Pe(t,""+a);break;case"className":Hu(t,"class",a);break;case"tabIndex":Hu(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Hu(t,e,a);break;case"style":Zf(t,a,n);break;case"data":if(l!=="object"){Hu(t,"data",a);break}case"src":case"href":if(a===""&&(l!=="a"||e!=="href")){t.removeAttribute(e);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(e);break}a=wu(""+a),t.setAttribute(e,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof n=="function"&&(e==="formAction"?(l!=="input"&&zt(t,l,"name",u.name,u,null),zt(t,l,"formEncType",u.formEncType,u,null),zt(t,l,"formMethod",u.formMethod,u,null),zt(t,l,"formTarget",u.formTarget,u,null)):(zt(t,l,"encType",u.encType,u,null),zt(t,l,"method",u.method,u,null),zt(t,l,"target",u.target,u,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(e);break}a=wu(""+a),t.setAttribute(e,a);break;case"onClick":a!=null&&(t.onclick=Mn);break;case"onScroll":a!=null&&mt("scroll",t);break;case"onScrollEnd":a!=null&&mt("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(e=a.__html,e!=null){if(u.children!=null)throw Error(s(60));t.innerHTML=e}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}e=wu(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(e,""+a):t.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(e,""):t.removeAttribute(e);break;case"capture":case"download":a===!0?t.setAttribute(e,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(e,a):t.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(e,a):t.removeAttribute(e);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(e):t.setAttribute(e,a);break;case"popover":mt("beforetoggle",t),mt("toggle",t),Nu(t,"popover",a);break;case"xlinkActuate":Bl(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Bl(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Bl(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Bl(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Bl(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Bl(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Bl(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Bl(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Bl(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Nu(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=Pd.get(e)||e,Nu(t,e,a))}}function Qc(t,l,e,a,u,n){switch(e){case"style":Zf(t,a,n);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(e=a.__html,e!=null){if(u.children!=null)throw Error(s(60));t.innerHTML=e}}break;case"children":typeof a=="string"?Pe(t,a):(typeof a=="number"||typeof a=="bigint")&&Pe(t,""+a);break;case"onScroll":a!=null&&mt("scroll",t);break;case"onScrollEnd":a!=null&&mt("scrollend",t);break;case"onClick":a!=null&&(t.onclick=Mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nf.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(u=e.endsWith("Capture"),l=e.slice(2,u?e.length-7:void 0),n=t[el]||null,n=n!=null?n[e]:null,typeof n=="function"&&t.removeEventListener(l,n,u),typeof a=="function")){typeof n!="function"&&n!==null&&(e in t?t[e]=null:t.hasAttribute(e)&&t.removeAttribute(e)),t.addEventListener(l,a,u);break t}e in t?t[e]=a:a===!0?t.setAttribute(e,""):Nu(t,e,a)}}}function Ft(t,l,e){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",t),mt("load",t);var a=!1,u=!1,n;for(n in e)if(e.hasOwnProperty(n)){var i=e[n];if(i!=null)switch(n){case"src":a=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:zt(t,l,n,i,e,null)}}u&&zt(t,l,"srcSet",e.srcSet,e,null),a&&zt(t,l,"src",e.src,e,null);return;case"input":mt("invalid",t);var c=n=i=u=null,f=null,S=null;for(a in e)if(e.hasOwnProperty(a)){var x=e[a];if(x!=null)switch(a){case"name":u=x;break;case"type":i=x;break;case"checked":f=x;break;case"defaultChecked":S=x;break;case"value":n=x;break;case"defaultValue":c=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(137,l));break;default:zt(t,l,a,x,e,null)}}Lf(t,n,c,f,S,i,u,!1),Cu(t);return;case"select":mt("invalid",t),a=i=n=null;for(u in e)if(e.hasOwnProperty(u)&&(c=e[u],c!=null))switch(u){case"value":n=c;break;case"defaultValue":i=c;break;case"multiple":a=c;default:zt(t,l,u,c,e,null)}l=n,e=i,t.multiple=!!a,l!=null?We(t,!!a,l,!1):e!=null&&We(t,!!a,e,!0);return;case"textarea":mt("invalid",t),n=u=a=null;for(i in e)if(e.hasOwnProperty(i)&&(c=e[i],c!=null))switch(i){case"value":a=c;break;case"defaultValue":u=c;break;case"children":n=c;break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:zt(t,l,i,c,e,null)}Xf(t,a,u,n),Cu(t);return;case"option":for(f in e)if(e.hasOwnProperty(f)&&(a=e[f],a!=null))switch(f){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:zt(t,l,f,a,e,null)}return;case"dialog":mt("beforetoggle",t),mt("toggle",t),mt("cancel",t),mt("close",t);break;case"iframe":case"object":mt("load",t);break;case"video":case"audio":for(a=0;a<vu.length;a++)mt(vu[a],t);break;case"image":mt("error",t),mt("load",t);break;case"details":mt("toggle",t);break;case"embed":case"source":case"link":mt("error",t),mt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(S in e)if(e.hasOwnProperty(S)&&(a=e[S],a!=null))switch(S){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:zt(t,l,S,a,e,null)}return;default:if(ni(l)){for(x in e)e.hasOwnProperty(x)&&(a=e[x],a!==void 0&&Qc(t,l,x,a,e,void 0));return}}for(c in e)e.hasOwnProperty(c)&&(a=e[c],a!=null&&zt(t,l,c,a,e,null))}function Ay(t,l,e,a){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,n=null,i=null,c=null,f=null,S=null,x=null;for(p in e){var D=e[p];if(e.hasOwnProperty(p)&&D!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":f=D;default:a.hasOwnProperty(p)||zt(t,l,p,null,a,D)}}for(var b in a){var p=a[b];if(D=e[b],a.hasOwnProperty(b)&&(p!=null||D!=null))switch(b){case"type":n=p;break;case"name":u=p;break;case"checked":S=p;break;case"defaultChecked":x=p;break;case"value":i=p;break;case"defaultValue":c=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(137,l));break;default:p!==D&&zt(t,l,b,p,a,D)}}ai(t,i,c,f,S,x,n,u);return;case"select":p=i=c=b=null;for(n in e)if(f=e[n],e.hasOwnProperty(n)&&f!=null)switch(n){case"value":break;case"multiple":p=f;default:a.hasOwnProperty(n)||zt(t,l,n,null,a,f)}for(u in a)if(n=a[u],f=e[u],a.hasOwnProperty(u)&&(n!=null||f!=null))switch(u){case"value":b=n;break;case"defaultValue":c=n;break;case"multiple":i=n;default:n!==f&&zt(t,l,u,n,a,f)}l=c,e=i,a=p,b!=null?We(t,!!e,b,!1):!!a!=!!e&&(l!=null?We(t,!!e,l,!0):We(t,!!e,e?[]:"",!1));return;case"textarea":p=b=null;for(c in e)if(u=e[c],e.hasOwnProperty(c)&&u!=null&&!a.hasOwnProperty(c))switch(c){case"value":break;case"children":break;default:zt(t,l,c,null,a,u)}for(i in a)if(u=a[i],n=e[i],a.hasOwnProperty(i)&&(u!=null||n!=null))switch(i){case"value":b=u;break;case"defaultValue":p=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==n&&zt(t,l,i,u,a,n)}Gf(t,b,p);return;case"option":for(var at in e)if(b=e[at],e.hasOwnProperty(at)&&b!=null&&!a.hasOwnProperty(at))switch(at){case"selected":t.selected=!1;break;default:zt(t,l,at,null,a,b)}for(f in a)if(b=a[f],p=e[f],a.hasOwnProperty(f)&&b!==p&&(b!=null||p!=null))switch(f){case"selected":t.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:zt(t,l,f,b,a,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in e)b=e[I],e.hasOwnProperty(I)&&b!=null&&!a.hasOwnProperty(I)&&zt(t,l,I,null,a,b);for(S in a)if(b=a[S],p=e[S],a.hasOwnProperty(S)&&b!==p&&(b!=null||p!=null))switch(S){case"children":case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(137,l));break;default:zt(t,l,S,b,a,p)}return;default:if(ni(l)){for(var Dt in e)b=e[Dt],e.hasOwnProperty(Dt)&&b!==void 0&&!a.hasOwnProperty(Dt)&&Qc(t,l,Dt,void 0,a,b);for(x in a)b=a[x],p=e[x],!a.hasOwnProperty(x)||b===p||b===void 0&&p===void 0||Qc(t,l,x,b,a,p);return}}for(var y in e)b=e[y],e.hasOwnProperty(y)&&b!=null&&!a.hasOwnProperty(y)&&zt(t,l,y,null,a,b);for(D in a)b=a[D],p=e[D],!a.hasOwnProperty(D)||b===p||b==null&&p==null||zt(t,l,D,b,a,p)}var Zc=null,Vc=null;function jn(t){return t.nodeType===9?t:t.ownerDocument}function Zr(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vr(t,l){if(t===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&l==="foreignObject"?0:t}function Kc(t,l){return t==="textarea"||t==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Jc=null;function xy(){var t=window.event;return t&&t.type==="popstate"?t===Jc?!1:(Jc=t,!0):(Jc=null,!1)}var Kr=typeof setTimeout=="function"?setTimeout:void 0,_y=typeof clearTimeout=="function"?clearTimeout:void 0,Jr=typeof Promise=="function"?Promise:void 0,zy=typeof queueMicrotask=="function"?queueMicrotask:typeof Jr<"u"?function(t){return Jr.resolve(null).then(t).catch(Dy)}:Kr;function Dy(t){setTimeout(function(){throw t})}function me(t){return t==="head"}function $r(t,l){var e=l,a=0,u=0;do{var n=e.nextSibling;if(t.removeChild(e),n&&n.nodeType===8)if(e=n.data,e==="/$"){if(0<a&&8>a){e=a;var i=t.ownerDocument;if(e&1&&Su(i.documentElement),e&2&&Su(i.body),e&4)for(e=i.head,Su(e),i=e.firstChild;i;){var c=i.nextSibling,f=i.nodeName;i[Na]||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&i.rel.toLowerCase()==="stylesheet"||e.removeChild(i),i=c}}if(u===0){t.removeChild(n),zu(l);return}u--}else e==="$"||e==="$?"||e==="$!"?u++:a=e.charCodeAt(0)-48;else a=0;e=n}while(e);zu(l)}function $c(t){var l=t.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var e=l;switch(l=l.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":$c(e),In(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}t.removeChild(e)}}function Oy(t,l,e,a){for(;t.nodeType===1;){var u=e;if(t.nodeName.toLowerCase()!==l.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[Na])switch(l){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(n=t.getAttribute("rel"),n==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(n!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(n=t.getAttribute("src"),(n!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&n&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(l==="input"&&t.type==="hidden"){var n=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===n)return t}else return t;if(t=Dl(t.nextSibling),t===null)break}return null}function Ry(t,l,e){if(l==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Dl(t.nextSibling),t===null))return null;return t}function kc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function My(t,l){var e=t.ownerDocument;if(t.data!=="$?"||e.readyState==="complete")l();else{var a=function(){l(),e.removeEventListener("DOMContentLoaded",a)};e.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function Dl(t){for(;t!=null;t=t.nextSibling){var l=t.nodeType;if(l===1||l===3)break;if(l===8){if(l=t.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return t}var Fc=null;function kr(t){t=t.previousSibling;for(var l=0;t;){if(t.nodeType===8){var e=t.data;if(e==="$"||e==="$!"||e==="$?"){if(l===0)return t;l--}else e==="/$"&&l++}t=t.previousSibling}return null}function Fr(t,l,e){switch(l=jn(e),t){case"html":if(t=l.documentElement,!t)throw Error(s(452));return t;case"head":if(t=l.head,!t)throw Error(s(453));return t;case"body":if(t=l.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Su(t){for(var l=t.attributes;l.length;)t.removeAttributeNode(l[0]);In(t)}var xl=new Map,Wr=new Set;function Un(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fl=N.d;N.d={f:jy,r:Uy,D:Ny,C:Hy,L:Cy,m:By,X:qy,S:wy,M:Yy};function jy(){var t=Fl.f(),l=An();return t||l}function Uy(t){var l=Je(t);l!==null&&l.tag===5&&l.type==="form"?go(l):Fl.r(t)}var Da=typeof document>"u"?null:document;function Pr(t,l,e){var a=Da;if(a&&typeof l=="string"&&l){var u=gl(l);u='link[rel="'+t+'"][href="'+u+'"]',typeof e=="string"&&(u+='[crossorigin="'+e+'"]'),Wr.has(u)||(Wr.add(u),t={rel:t,crossOrigin:e,href:l},a.querySelector(u)===null&&(l=a.createElement("link"),Ft(l,"link",t),Qt(l),a.head.appendChild(l)))}}function Ny(t){Fl.D(t),Pr("dns-prefetch",t,null)}function Hy(t,l){Fl.C(t,l),Pr("preconnect",t,l)}function Cy(t,l,e){Fl.L(t,l,e);var a=Da;if(a&&t&&l){var u='link[rel="preload"][as="'+gl(l)+'"]';l==="image"&&e&&e.imageSrcSet?(u+='[imagesrcset="'+gl(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(u+='[imagesizes="'+gl(e.imageSizes)+'"]')):u+='[href="'+gl(t)+'"]';var n=u;switch(l){case"style":n=Oa(t);break;case"script":n=Ra(t)}xl.has(n)||(t=Y({rel:"preload",href:l==="image"&&e&&e.imageSrcSet?void 0:t,as:l},e),xl.set(n,t),a.querySelector(u)!==null||l==="style"&&a.querySelector(bu(n))||l==="script"&&a.querySelector(pu(n))||(l=a.createElement("link"),Ft(l,"link",t),Qt(l),a.head.appendChild(l)))}}function By(t,l){Fl.m(t,l);var e=Da;if(e&&t){var a=l&&typeof l.as=="string"?l.as:"script",u='link[rel="modulepreload"][as="'+gl(a)+'"][href="'+gl(t)+'"]',n=u;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":n=Ra(t)}if(!xl.has(n)&&(t=Y({rel:"modulepreload",href:t},l),xl.set(n,t),e.querySelector(u)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector(pu(n)))return}a=e.createElement("link"),Ft(a,"link",t),Qt(a),e.head.appendChild(a)}}}function wy(t,l,e){Fl.S(t,l,e);var a=Da;if(a&&t){var u=$e(a).hoistableStyles,n=Oa(t);l=l||"default";var i=u.get(n);if(!i){var c={loading:0,preload:null};if(i=a.querySelector(bu(n)))c.loading=5;else{t=Y({rel:"stylesheet",href:t,"data-precedence":l},e),(e=xl.get(n))&&Wc(t,e);var f=i=a.createElement("link");Qt(f),Ft(f,"link",t),f._p=new Promise(function(S,x){f.onload=S,f.onerror=x}),f.addEventListener("load",function(){c.loading|=1}),f.addEventListener("error",function(){c.loading|=2}),c.loading|=4,Nn(i,l,a)}i={type:"stylesheet",instance:i,count:1,state:c},u.set(n,i)}}}function qy(t,l){Fl.X(t,l);var e=Da;if(e&&t){var a=$e(e).hoistableScripts,u=Ra(t),n=a.get(u);n||(n=e.querySelector(pu(u)),n||(t=Y({src:t,async:!0},l),(l=xl.get(u))&&Pc(t,l),n=e.createElement("script"),Qt(n),Ft(n,"link",t),e.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},a.set(u,n))}}function Yy(t,l){Fl.M(t,l);var e=Da;if(e&&t){var a=$e(e).hoistableScripts,u=Ra(t),n=a.get(u);n||(n=e.querySelector(pu(u)),n||(t=Y({src:t,async:!0,type:"module"},l),(l=xl.get(u))&&Pc(t,l),n=e.createElement("script"),Qt(n),Ft(n,"link",t),e.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},a.set(u,n))}}function Ir(t,l,e,a){var u=(u=V.current)?Un(u):null;if(!u)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(l=Oa(e.href),e=$e(u).hoistableStyles,a=e.get(l),a||(a={type:"style",instance:null,count:0,state:null},e.set(l,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){t=Oa(e.href);var n=$e(u).hoistableStyles,i=n.get(t);if(i||(u=u.ownerDocument||u,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},n.set(t,i),(n=u.querySelector(bu(t)))&&!n._p&&(i.instance=n,i.state.loading=5),xl.has(t)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},xl.set(t,e),n||Ly(u,t,e,i.state))),l&&a===null)throw Error(s(528,""));return i}if(l&&a!==null)throw Error(s(529,""));return null;case"script":return l=e.async,e=e.src,typeof e=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ra(e),e=$e(u).hoistableScripts,a=e.get(l),a||(a={type:"script",instance:null,count:0,state:null},e.set(l,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Oa(t){return'href="'+gl(t)+'"'}function bu(t){return'link[rel="stylesheet"]['+t+"]"}function td(t){return Y({},t,{"data-precedence":t.precedence,precedence:null})}function Ly(t,l,e,a){t.querySelector('link[rel="preload"][as="style"]['+l+"]")?a.loading=1:(l=t.createElement("link"),a.preload=l,l.addEventListener("load",function(){return a.loading|=1}),l.addEventListener("error",function(){return a.loading|=2}),Ft(l,"link",e),Qt(l),t.head.appendChild(l))}function Ra(t){return'[src="'+gl(t)+'"]'}function pu(t){return"script[async]"+t}function ld(t,l,e){if(l.count++,l.instance===null)switch(l.type){case"style":var a=t.querySelector('style[data-href~="'+gl(e.href)+'"]');if(a)return l.instance=a,Qt(a),a;var u=Y({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),Qt(a),Ft(a,"style",u),Nn(a,e.precedence,t),l.instance=a;case"stylesheet":u=Oa(e.href);var n=t.querySelector(bu(u));if(n)return l.state.loading|=4,l.instance=n,Qt(n),n;a=td(e),(u=xl.get(u))&&Wc(a,u),n=(t.ownerDocument||t).createElement("link"),Qt(n);var i=n;return i._p=new Promise(function(c,f){i.onload=c,i.onerror=f}),Ft(n,"link",a),l.state.loading|=4,Nn(n,e.precedence,t),l.instance=n;case"script":return n=Ra(e.src),(u=t.querySelector(pu(n)))?(l.instance=u,Qt(u),u):(a=e,(u=xl.get(n))&&(a=Y({},e),Pc(a,u)),t=t.ownerDocument||t,u=t.createElement("script"),Qt(u),Ft(u,"link",a),t.head.appendChild(u),l.instance=u);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(a=l.instance,l.state.loading|=4,Nn(a,e.precedence,t));return l.instance}function Nn(t,l,e){for(var a=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=a.length?a[a.length-1]:null,n=u,i=0;i<a.length;i++){var c=a[i];if(c.dataset.precedence===l)n=c;else if(n!==u)break}n?n.parentNode.insertBefore(t,n.nextSibling):(l=e.nodeType===9?e.head:e,l.insertBefore(t,l.firstChild))}function Wc(t,l){t.crossOrigin==null&&(t.crossOrigin=l.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=l.referrerPolicy),t.title==null&&(t.title=l.title)}function Pc(t,l){t.crossOrigin==null&&(t.crossOrigin=l.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=l.referrerPolicy),t.integrity==null&&(t.integrity=l.integrity)}var Hn=null;function ed(t,l,e){if(Hn===null){var a=new Map,u=Hn=new Map;u.set(e,a)}else u=Hn,a=u.get(e),a||(a=new Map,u.set(e,a));if(a.has(t))return a;for(a.set(t,null),e=e.getElementsByTagName(t),u=0;u<e.length;u++){var n=e[u];if(!(n[Na]||n[Wt]||t==="link"&&n.getAttribute("rel")==="stylesheet")&&n.namespaceURI!=="http://www.w3.org/2000/svg"){var i=n.getAttribute(l)||"";i=t+i;var c=a.get(i);c?c.push(n):a.set(i,[n])}}return a}function ad(t,l,e){t=t.ownerDocument||t,t.head.insertBefore(e,l==="title"?t.querySelector("head > title"):null)}function Gy(t,l,e){if(e===1||l.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return t=l.disabled,typeof l.precedence=="string"&&t==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function ud(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Eu=null;function Xy(){}function Qy(t,l,e){if(Eu===null)throw Error(s(475));var a=Eu;if(l.type==="stylesheet"&&(typeof e.media!="string"||matchMedia(e.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var u=Oa(e.href),n=t.querySelector(bu(u));if(n){t=n._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(a.count++,a=Cn.bind(a),t.then(a,a)),l.state.loading|=4,l.instance=n,Qt(n);return}n=t.ownerDocument||t,e=td(e),(u=xl.get(u))&&Wc(e,u),n=n.createElement("link"),Qt(n);var i=n;i._p=new Promise(function(c,f){i.onload=c,i.onerror=f}),Ft(n,"link",e),l.instance=n}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=Cn.bind(a),t.addEventListener("load",l),t.addEventListener("error",l))}}function Zy(){if(Eu===null)throw Error(s(475));var t=Eu;return t.stylesheets&&t.count===0&&Ic(t,t.stylesheets),0<t.count?function(l){var e=setTimeout(function(){if(t.stylesheets&&Ic(t,t.stylesheets),t.unsuspend){var a=t.unsuspend;t.unsuspend=null,a()}},6e4);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(e)}}:null}function Cn(){if(this.count--,this.count===0){if(this.stylesheets)Ic(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Bn=null;function Ic(t,l){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Bn=new Map,l.forEach(Vy,t),Bn=null,Cn.call(t))}function Vy(t,l){if(!(l.state.loading&4)){var e=Bn.get(t);if(e)var a=e.get(null);else{e=new Map,Bn.set(t,e);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),n=0;n<u.length;n++){var i=u[n];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(e.set(i.dataset.precedence,i),a=i)}a&&e.set(null,a)}u=l.instance,i=u.getAttribute("data-precedence"),n=e.get(i)||a,n===a&&e.set(null,u),e.set(i,u),this.count++,a=Cn.bind(this),u.addEventListener("load",a),u.addEventListener("error",a),n?n.parentNode.insertBefore(u,n.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),l.state.loading|=4}}var Tu={$$typeof:ut,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Ky(t,l,e,a,u,n,i,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kn(0),this.hiddenUpdates=kn(null),this.identifierPrefix=a,this.onUncaughtError=u,this.onCaughtError=n,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function nd(t,l,e,a,u,n,i,c,f,S,x,D){return t=new Ky(t,l,e,i,c,f,S,D),l=1,n===!0&&(l|=24),n=ol(3,null,null,l),t.current=n,n.stateNode=t,l=Hi(),l.refCount++,t.pooledCache=l,l.refCount++,n.memoizedState={element:a,isDehydrated:e,cache:l},qi(n),t}function id(t){return t?(t=ia,t):ia}function cd(t,l,e,a,u,n){u=id(u),a.context===null?a.context=u:a.pendingContext=u,a=ee(l),a.payload={element:e},n=n===void 0?null:n,n!==null&&(a.callback=n),e=ae(t,a,l),e!==null&&(ml(e,t,l),Pa(e,t,l))}function fd(t,l){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var e=t.retryLane;t.retryLane=e!==0&&e<l?e:l}}function tf(t,l){fd(t,l),(t=t.alternate)&&fd(t,l)}function sd(t){if(t.tag===13){var l=na(t,67108864);l!==null&&ml(l,t,67108864),tf(t,67108864)}}var wn=!0;function Jy(t,l,e,a){var u=T.T;T.T=null;var n=N.p;try{N.p=2,lf(t,l,e,a)}finally{N.p=n,T.T=u}}function $y(t,l,e,a){var u=T.T;T.T=null;var n=N.p;try{N.p=8,lf(t,l,e,a)}finally{N.p=n,T.T=u}}function lf(t,l,e,a){if(wn){var u=ef(a);if(u===null)Xc(t,l,a,qn,e),rd(t,a);else if(Fy(u,t,l,e,a))a.stopPropagation();else if(rd(t,a),l&4&&-1<ky.indexOf(t)){for(;u!==null;){var n=Je(u);if(n!==null)switch(n.tag){case 3:if(n=n.stateNode,n.current.memoizedState.isDehydrated){var i=xe(n.pendingLanes);if(i!==0){var c=n;for(c.pendingLanes|=2,c.entangledLanes|=2;i;){var f=1<<31-fl(i);c.entanglements[1]|=f,i&=~f}Hl(n),(At&6)===0&&(En=Rl()+500,mu(0))}}break;case 13:c=na(n,2),c!==null&&ml(c,n,2),An(),tf(n,2)}if(n=ef(a),n===null&&Xc(t,l,a,qn,e),n===u)break;u=n}u!==null&&a.stopPropagation()}else Xc(t,l,a,null,e)}}function ef(t){return t=ci(t),af(t)}var qn=null;function af(t){if(qn=null,t=Ke(t),t!==null){var l=M(t);if(l===null)t=null;else{var e=l.tag;if(e===13){if(t=O(l),t!==null)return t;t=null}else if(e===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;t=null}else l!==t&&(t=null)}}return qn=t,null}function od(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hd()){case Af:return 2;case xf:return 8;case Ru:case Cd:return 32;case _f:return 268435456;default:return 32}default:return 32}}var uf=!1,ve=null,ge=null,Se=null,Au=new Map,xu=new Map,be=[],ky="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rd(t,l){switch(t){case"focusin":case"focusout":ve=null;break;case"dragenter":case"dragleave":ge=null;break;case"mouseover":case"mouseout":Se=null;break;case"pointerover":case"pointerout":Au.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(l.pointerId)}}function _u(t,l,e,a,u,n){return t===null||t.nativeEvent!==n?(t={blockedOn:l,domEventName:e,eventSystemFlags:a,nativeEvent:n,targetContainers:[u]},l!==null&&(l=Je(l),l!==null&&sd(l)),t):(t.eventSystemFlags|=a,l=t.targetContainers,u!==null&&l.indexOf(u)===-1&&l.push(u),t)}function Fy(t,l,e,a,u){switch(l){case"focusin":return ve=_u(ve,t,l,e,a,u),!0;case"dragenter":return ge=_u(ge,t,l,e,a,u),!0;case"mouseover":return Se=_u(Se,t,l,e,a,u),!0;case"pointerover":var n=u.pointerId;return Au.set(n,_u(Au.get(n)||null,t,l,e,a,u)),!0;case"gotpointercapture":return n=u.pointerId,xu.set(n,_u(xu.get(n)||null,t,l,e,a,u)),!0}return!1}function dd(t){var l=Ke(t.target);if(l!==null){var e=M(l);if(e!==null){if(l=e.tag,l===13){if(l=O(e),l!==null){t.blockedOn=l,Qd(t.priority,function(){if(e.tag===13){var a=yl();a=Fn(a);var u=na(e,a);u!==null&&ml(u,e,a),tf(e,a)}});return}}else if(l===3&&e.stateNode.current.memoizedState.isDehydrated){t.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yn(t){if(t.blockedOn!==null)return!1;for(var l=t.targetContainers;0<l.length;){var e=ef(t.nativeEvent);if(e===null){e=t.nativeEvent;var a=new e.constructor(e.type,e);ii=a,e.target.dispatchEvent(a),ii=null}else return l=Je(e),l!==null&&sd(l),t.blockedOn=e,!1;l.shift()}return!0}function hd(t,l,e){Yn(t)&&e.delete(l)}function Wy(){uf=!1,ve!==null&&Yn(ve)&&(ve=null),ge!==null&&Yn(ge)&&(ge=null),Se!==null&&Yn(Se)&&(Se=null),Au.forEach(hd),xu.forEach(hd)}function Ln(t,l){t.blockedOn===l&&(t.blockedOn=null,uf||(uf=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Wy)))}var Gn=null;function yd(t){Gn!==t&&(Gn=t,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Gn===t&&(Gn=null);for(var l=0;l<t.length;l+=3){var e=t[l],a=t[l+1],u=t[l+2];if(typeof a!="function"){if(af(a||e)===null)continue;break}var n=Je(e);n!==null&&(t.splice(l,3),l-=3,ac(n,{pending:!0,data:u,method:e.method,action:a},a,u))}}))}function zu(t){function l(f){return Ln(f,t)}ve!==null&&Ln(ve,t),ge!==null&&Ln(ge,t),Se!==null&&Ln(Se,t),Au.forEach(l),xu.forEach(l);for(var e=0;e<be.length;e++){var a=be[e];a.blockedOn===t&&(a.blockedOn=null)}for(;0<be.length&&(e=be[0],e.blockedOn===null);)dd(e),e.blockedOn===null&&be.shift();if(e=(t.ownerDocument||t).$$reactFormReplay,e!=null)for(a=0;a<e.length;a+=3){var u=e[a],n=e[a+1],i=u[el]||null;if(typeof n=="function")i||yd(e);else if(i){var c=null;if(n&&n.hasAttribute("formAction")){if(u=n,i=n[el]||null)c=i.formAction;else if(af(u)!==null)continue}else c=i.action;typeof c=="function"?e[a+1]=c:(e.splice(a,3),a-=3),yd(e)}}}function nf(t){this._internalRoot=t}Xn.prototype.render=nf.prototype.render=function(t){var l=this._internalRoot;if(l===null)throw Error(s(409));var e=l.current,a=yl();cd(e,a,t,l,null,null)},Xn.prototype.unmount=nf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var l=t.containerInfo;cd(t.current,2,null,t,null,null),An(),l[Ve]=null}};function Xn(t){this._internalRoot=t}Xn.prototype.unstable_scheduleHydration=function(t){if(t){var l=Mf();t={blockedOn:null,target:t,priority:l};for(var e=0;e<be.length&&l!==0&&l<be[e].priority;e++);be.splice(e,0,t),e===0&&dd(t)}};var md=v.version;if(md!=="19.1.1")throw Error(s(527,md,"19.1.1"));N.findDOMNode=function(t){var l=t._reactInternals;if(l===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=U(l),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var Py={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qn.isDisabled&&Qn.supportsFiber)try{Ma=Qn.inject(Py),cl=Qn}catch{}}return Ou.createRoot=function(t,l){if(!A(t))throw Error(s(299));var e=!1,a="",u=jo,n=Uo,i=No,c=null;return l!=null&&(l.unstable_strictMode===!0&&(e=!0),l.identifierPrefix!==void 0&&(a=l.identifierPrefix),l.onUncaughtError!==void 0&&(u=l.onUncaughtError),l.onCaughtError!==void 0&&(n=l.onCaughtError),l.onRecoverableError!==void 0&&(i=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(c=l.unstable_transitionCallbacks)),l=nd(t,1,!1,null,null,e,a,u,n,i,c,null),t[Ve]=l.current,Gc(t),new nf(l)},Ou.hydrateRoot=function(t,l,e){if(!A(t))throw Error(s(299));var a=!1,u="",n=jo,i=Uo,c=No,f=null,S=null;return e!=null&&(e.unstable_strictMode===!0&&(a=!0),e.identifierPrefix!==void 0&&(u=e.identifierPrefix),e.onUncaughtError!==void 0&&(n=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(c=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(f=e.unstable_transitionCallbacks),e.formState!==void 0&&(S=e.formState)),l=nd(t,1,!0,l,e??null,a,u,n,i,c,f,S),l.context=id(null),e=l.current,a=yl(),a=Fn(a),u=ee(a),u.callback=null,ae(e,u,a),e=a,l.current.lanes=e,Ua(l,e),Hl(l),t[Ve]=l.current,Gc(t),new Xn(l)},Ou.version="19.1.1",Ou}var _d;function fm(){if(_d)return sf.exports;_d=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(v){console.error(v)}}return h(),sf.exports=cm(),sf.exports}var sm=fm();function om({onAddHitter:h,teams:v=[]}){const[g,s]=w.useState(""),[A,M]=w.useState(""),[O,q]=w.useState(""),U=E=>{E.preventDefault();const Y=g.trim();if(!Y)return;h(Y,{teamName:A||void 0,description:O.trim()||void 0})?(s(""),M(""),q("")):alert("A hitter with that name already exists.")};return r.jsxs("form",{onSubmit:U,style:{marginBottom:"1rem"},children:[r.jsx("h3",{children:"Create Hitter"}),r.jsx("div",{style:{marginBottom:8},children:r.jsxs("label",{children:[r.jsx("div",{style:{fontSize:12,opacity:.85},children:"Hitter Name"}),r.jsx("input",{type:"text",placeholder:"Hitter Name",value:g,onChange:E=>s(E.target.value)})]})}),r.jsx("div",{style:{marginBottom:8},children:r.jsxs("label",{children:[r.jsx("div",{style:{fontSize:12,opacity:.85},children:"Team"}),r.jsxs("select",{value:A,onChange:E=>M(E.target.value),children:[r.jsx("option",{value:"",children:"— No team —"}),v.map(E=>r.jsxs("option",{value:E.name,children:[E.name,E.description?` – ${E.description}`:""]},E.name))]})]})}),r.jsx("div",{style:{marginBottom:8},children:r.jsxs("label",{children:[r.jsx("div",{style:{fontSize:12,opacity:.85},children:"Description (optional)"}),r.jsx("input",{type:"text",placeholder:"e.g., Lefty with quick hands",value:O,onChange:E=>q(E.target.value)})]})}),r.jsx("button",{type:"submit",children:"Add Hitter"})]})}const rm="SwingSyncDB_v2",dm=2,Te="pitchClips",Ae="swingClips",Cl="matchupClips";function Qe(h){if(!(h instanceof Blob))return null;if(h.type&&h.type.startsWith("video/"))return h;try{return new Blob([h],{type:"video/webm"})}catch{return h}}function Ef(h,v="video/webm"){try{return new Blob([h],{type:v||"video/webm"})}catch{return null}}function Ol(){return new Promise((h,v)=>{const g=indexedDB.open(rm,dm);g.onupgradeneeded=()=>{const s=g.result;s.objectStoreNames.contains(Te)||s.createObjectStore(Te,{keyPath:"key"}),s.objectStoreNames.contains(Ae)||s.createObjectStore(Ae,{keyPath:"key"}),s.objectStoreNames.contains(Cl)||s.createObjectStore(Cl,{keyPath:"key"})},g.onsuccess=()=>h(g.result),g.onerror=()=>v(g.error)})}async function hm(h,v){const g=await Ol(),s=await v.arrayBuffer(),A=v.type&&v.type.startsWith("video/")?v.type:"video/webm";await new Promise((M,O)=>{const q=g.transaction(Te,"readwrite");q.objectStore(Te).put({key:h,blob:v,bytes:s,type:A,createdAt:Date.now()}),q.oncomplete=M,q.onerror=()=>O(q.error)}),g.close()}async function Vn(h){const v=await Ol(),g=await new Promise((s,A)=>{const O=v.transaction(Te,"readonly").objectStore(Te).get(h);O.onsuccess=()=>s(O.result||null),O.onerror=()=>A(O.error)});return v.close(),g?g.blob instanceof Blob&&g.blob.size?Qe(g.blob):g.bytes?Qe(Ef(g.bytes,g.type)):null:null}async function Dd(h){const v=await Ol();await new Promise((g,s)=>{const A=v.transaction(Te,"readwrite");A.objectStore(Te).delete(h),A.oncomplete=g,A.onerror=()=>s(A.error)}),v.close()}async function ym(h,v){const g=await Ol(),s=await v.arrayBuffer(),A=v.type&&v.type.startsWith("video/")?v.type:"video/webm";await new Promise((M,O)=>{const q=g.transaction(Ae,"readwrite");q.objectStore(Ae).put({key:h,blob:v,bytes:s,type:A,createdAt:Date.now()}),q.oncomplete=M,q.onerror=()=>O(q.error)}),g.close()}async function Od(h){const v=await Ol(),g=await new Promise((s,A)=>{const O=v.transaction(Ae,"readonly").objectStore(Ae).get(h);O.onsuccess=()=>s(O.result||null),O.onerror=()=>A(O.error)});return v.close(),g?g.blob instanceof Blob&&g.blob.size?Qe(g.blob):g.bytes?Qe(Ef(g.bytes,g.type)):null:null}async function mm(h){const v=await Ol();await new Promise((g,s)=>{const A=v.transaction(Ae,"readwrite");A.objectStore(Ae).delete(h),A.oncomplete=g,A.onerror=()=>s(A.error)}),v.close()}async function zd(h,v){const g=await Ol(),s=await v.arrayBuffer(),A=v.type&&v.type.startsWith("video/")?v.type:"video/webm";await new Promise((M,O)=>{const q=g.transaction(Cl,"readwrite");q.objectStore(Cl).put({key:h,blob:v,bytes:s,type:A,createdAt:Date.now()}),q.oncomplete=M,q.onerror=()=>O(q.error)}),g.close()}async function bf(h){const v=await Ol(),g=await new Promise((s,A)=>{const O=v.transaction(Cl,"readonly").objectStore(Cl).get(h);O.onsuccess=()=>s(O.result||null),O.onerror=()=>A(O.error)});return v.close(),g?g.blob instanceof Blob&&g.blob.size?Qe(g.blob):g.bytes?Qe(Ef(g.bytes,g.type)):null:null}async function Rd(h){const v=await Ol();await new Promise((g,s)=>{const A=v.transaction(Cl,"readwrite");A.objectStore(Cl).delete(h),A.oncomplete=g,A.onerror=()=>s(A.error)}),v.close()}async function vm(){const h=await Ol(),v=await new Promise((g,s)=>{const A=[],O=h.transaction(Cl,"readonly").objectStore(Cl).openKeyCursor();O.onsuccess=q=>{const U=q.target.result;U?(A.push(U.key),U.continue()):g(A)},O.onerror=()=>s(O.error)});return h.close(),v}function gm(h){return{name:h,swings:[]}}function Sm(h,v="",g=""){return{name:h,description:v,teamName:g,pitches:[]}}function bm(h,v){return h.find(g=>g.name===v)}function pm(h,v){return h.find(g=>g.name===v)}async function Em(){const h=await Ol();await Promise.all(Array.from(h.objectStoreNames).map(v=>new Promise((g,s)=>{const A=h.transaction(v,"readwrite");A.objectStore(v).clear(),A.oncomplete=g,A.onerror=()=>s(A.error)}))),h.close(),Object.keys(localStorage).filter(v=>v.startsWith("matchupClip_")).forEach(v=>localStorage.removeItem(v)),console.log("✅ All clips deleted (pitches, swings, matchups)")}function Tm({pitchers:h=[],pitches:v=[],onAddPitcher:g,onDeletePitcher:s,onDeletePitch:A,requestLoadVideoInTagger:M,teams:O=[]}){const[q,U]=w.useState(""),[E,Y]=w.useState(""),[W,nt]=w.useState(""),P=Q=>{Q.preventDefault();const F=q.trim();if(!F)return;g(F,{teamName:E||void 0,description:W.trim()||void 0})?(U(""),Y(""),nt("")):alert("A pitcher with that name already exists.")};return r.jsxs("form",{onSubmit:P,style:{marginBottom:"1rem"},children:[r.jsx("h3",{children:"Create Pitcher"}),r.jsx("div",{style:{marginBottom:8},children:r.jsxs("label",{children:[r.jsx("div",{style:{fontSize:12,opacity:.85},children:"Pitcher Name"}),r.jsx("input",{type:"text",placeholder:"Pitcher Name",value:q,onChange:Q=>U(Q.target.value)})]})}),r.jsx("div",{style:{marginBottom:8},children:r.jsxs("label",{children:[r.jsx("div",{style:{fontSize:12,opacity:.85},children:"Team"}),r.jsxs("select",{value:E,onChange:Q=>Y(Q.target.value),children:[r.jsx("option",{value:"",children:"— No team —"}),O.map(Q=>r.jsxs("option",{value:Q.name,children:[Q.name,Q.description?` – ${Q.description}`:""]},Q.name))]})]})}),r.jsx("div",{style:{marginBottom:12},children:r.jsxs("label",{children:[r.jsx("div",{style:{fontSize:12,opacity:.85},children:"Description (optional)"}),r.jsx("input",{type:"text",placeholder:"e.g., RHP, heavy sinker",value:W,onChange:Q=>nt(Q.target.value)})]})}),r.jsx("button",{type:"submit",children:"Add Pitcher"}),r.jsx("div",{style:{marginTop:12},children:h.map(Q=>{const F=v.filter(tt=>tt.pitcherName===Q.name);return r.jsxs("details",{style:{borderBottom:"1px solid #eee",padding:"6px 0"},children:[r.jsxs("summary",{style:{cursor:"pointer",userSelect:"none"},children:[r.jsx("strong",{children:Q.name}),Q.teamName?` — ${Q.teamName}`:"",Q.description?` (${Q.description})`:"",r.jsxs("span",{style:{fontSize:12,opacity:.7},children:[" ","• ",F.length," pitch",F.length===1?"":"es"]}),r.jsx("button",{type:"button",onClick:()=>s(Q.name),style:{marginLeft:8,fontSize:12},children:"Delete Pitcher"})]}),r.jsx("div",{style:{paddingLeft:14,paddingTop:6},children:F.length===0?r.jsx("div",{style:{fontSize:12,opacity:.7},children:"No pitches."}):F.map((tt,dt)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,padding:"2px 0"},children:[r.jsxs("span",{children:["Pitch ",dt+1," — contact ",tt.contactFrame,tt.videoKey?" • saved":" • no clip"]}),tt.videoKey&&r.jsx("button",{type:"button",onClick:async()=>{try{const Z=await Vn(tt.videoKey);if(!Z){alert("No clip found for this pitch.");return}M(Z,`${Q.name} Pitch ${dt+1}`)}catch(Z){console.error("Pitch preview failed",Z),alert("Failed to load pitch preview.")}},style:{fontSize:12},children:"Preview"}),r.jsx("button",{type:"button",style:{marginLeft:"auto",fontSize:12},onClick:()=>A(Q.name,dt),children:"Delete"})]},`${Q.name}-pitch-${dt}`))})]},Q.name)})})]})}function Am({teams:h=[],onAddTeam:v,onDeleteTeam:g}){const[s,A]=w.useState(""),M=O=>{O.preventDefault();const q=s.trim();if(q){if(h.some(U=>(U?.name||"").toLowerCase()===q.toLowerCase())){alert("Team with this name already exists.");return}v(q),A("")}};return r.jsxs("form",{onSubmit:M,style:{marginBottom:"1rem"},children:[r.jsx("h3",{children:"Create Team"}),r.jsx("input",{type:"text",placeholder:"Team Name",value:s,onChange:O=>A(O.target.value)}),r.jsx("button",{type:"submit",children:"Add Team"}),r.jsx("ul",{children:h.map(O=>r.jsxs("li",{children:[O.name," ",r.jsx("button",{type:"button",onClick:()=>g(O.name),children:"Delete"})]},O.name))})]})}const xm=30;function Zn(h,v){return Math.round(h*v)}function _m(h){const v=(h||"").toLowerCase();return v.startsWith("matchup:")?"matchup":/(^|\s)(pitch|pitching)\b/.test(v)?"pitch":/(^|\s)(swing|hitting|hitter)\b/.test(v)?"swing":"both"}function zm({text:h}){return h?r.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:0,padding:"6px 10px",background:"rgba(0,0,0,0.85)",color:"#fff",fontSize:12,fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",pointerEvents:"none"},children:h}):null}function Tf({source:h,metadata:v={},fps:g=xm,onTagSwing:s,onTagPitchContact:A,taggable:M=!1}){const O=w.useRef(null),[q,U]=w.useState(0),[E,Y]=w.useState(!1),[W,nt]=w.useState(""),[P,Q]=w.useState(""),F=(v?.label||"").trim(),tt=w.useMemo(()=>_m(F),[F]),dt=tt==="matchup",Z=M,ut=w.useMemo(()=>Zn(q,g),[q,g]),it=w.useCallback(async()=>{const L=O.current;if(L)try{L.paused||L.ended?(await L.play(),Y(!0)):(L.pause(),Y(!1))}catch{nt("Autoplay blocked. Click once, then retry.")}},[]),j=w.useCallback(L=>{const lt=O.current;if(!lt)return;lt.pause(),Y(!1);const Tt=(lt.currentTime||0)+L/g;lt.currentTime=Math.max(0,Tt),U(lt.currentTime)},[g]),k=w.useCallback(()=>{const L=Zn(O.current?.currentTime??q,g);Q(`Pitch contact @ f${L}`),A&&A(L)},[g,q,A]),$=w.useCallback(()=>{const L=Zn(O.current?.currentTime??q,g);s&&s({startFrame:L,contactFrame:null})},[g,q,s]),ft=w.useCallback(()=>{const L=Zn(O.current?.currentTime??q,g);s&&s({startFrame:null,contactFrame:L})},[g,q,s]);return r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",gap:8,padding:8},children:[r.jsx("div",{style:{position:"relative",flex:"0 1 auto",background:"#000",border:"1px solid #ddd"},children:h?r.jsxs(r.Fragment,{children:[r.jsx("video",{ref:O,src:h,playsInline:!0,controls:!0,style:{width:"100%",maxHeight:"60vh",objectFit:"contain",background:"#000"}}),dt&&r.jsx(zm,{text:F})]}):r.jsx("div",{style:{color:"#999",display:"grid",placeItems:"center",height:"200px"},children:"Load a video to tag."})}),Z&&h&&r.jsxs("div",{style:{borderTop:"1px solid #ddd",paddingTop:8,display:"grid",gap:8},children:[r.jsxs("div",{style:{display:"flex",gap:6},children:[r.jsx("button",{type:"button",style:{fontSize:12,padding:"4px 6px",borderRadius:4},onClick:()=>j(-1),disabled:!h,children:"◀︎1f"}),r.jsx("button",{type:"button",style:{fontSize:12,padding:"4px 6px",borderRadius:4},onClick:it,disabled:!h,children:E?"Pause":"Play"}),r.jsx("button",{type:"button",style:{fontSize:12,padding:"4px 6px",borderRadius:4},onClick:()=>j(1),disabled:!h,children:"1f▶︎"}),r.jsx("div",{style:{opacity:.75,fontSize:12},children:P})]}),(tt==="pitch"||tt==="both")&&r.jsxs("div",{style:{display:"flex",gap:6},children:[r.jsx("span",{style:{fontSize:12,opacity:.85},children:r.jsx("strong",{children:"Pitch"})}),r.jsxs("button",{type:"button",style:{fontSize:12,padding:"4px 6px",borderRadius:4},onClick:k,disabled:!h,children:["Set Contact @ f",ut]})]}),(tt==="swing"||tt==="both")&&r.jsxs("div",{style:{display:"flex",gap:6},children:[r.jsx("span",{style:{fontSize:12,opacity:.85},children:r.jsx("strong",{children:"Swing"})}),r.jsx("button",{type:"button",style:{fontSize:12,padding:"4px 6px",borderRadius:4},onClick:$,disabled:!h,children:"Set Start"}),r.jsx("button",{type:"button",style:{fontSize:12,padding:"4px 6px",borderRadius:4},onClick:ft,disabled:!h,children:"Set Contact"})]}),!!W&&r.jsx("div",{style:{color:"crimson",fontSize:12},children:W})]})]})}function Dm({hitters:h,onAddSwing:v,constants:g={FPS:30},onClose:s}){const A=Number(g?.FPS)||30,[M,O]=w.useState(""),[q,U]=w.useState(null),[E,Y]=w.useState(null),[W,nt]=w.useState(""),[P,Q]=w.useState(null),[F,tt]=w.useState(null),[dt,Z]=w.useState(null),[ut,it]=w.useState(""),j=w.useRef(null),k=w.useCallback(L=>{const lt=L.target.files?.[0]||null;U(lt),Q(null),tt(null),Z(null),Y(lt?URL.createObjectURL(lt):null)},[]);async function $(L,lt,Tt){const ht="video/webm;codecs=vp9",H=document.createElement("video");H.muted=!0,H.playsInline=!0;const bt=document.createElement("div");Object.assign(bt.style,{position:"fixed",left:"-9999px"}),bt.appendChild(H),document.body.appendChild(bt);const gt=URL.createObjectURL(L);H.src=gt,await new Promise((_,C)=>{H.onloadedmetadata=()=>_(),H.onerror=()=>C(new Error("Failed to load metadata"))});const T=H.captureStream(),N=new MediaRecorder(T,{mimeType:ht}),K=[];N.ondataavailable=_=>_.data&&K.push(_.data);const st=new Promise(_=>N.onstop=()=>_());await new Promise((_,C)=>{H.onseeked=()=>_(),H.onerror=()=>C(new Error("Seek failed")),H.currentTime=lt}),N.start(),H.play(),await new Promise(_=>{let C=0;const B=()=>{H.currentTime>=Tt?(H.pause(),N.stop(),cancelAnimationFrame(C),_()):C=requestAnimationFrame(B)};C=requestAnimationFrame(B)}),await st;const o=new Blob(K,{type:ht});return URL.revokeObjectURL(gt),bt.remove(),Qe(o)}const ft=async L=>{if(L.preventDefault(),it(""),!(!M||!q||P==null||F==null))try{const lt=Math.max(0,F-2*A),Tt=lt/A,ht=F/A,H=await $(q,Tt,ht),bt=Math.round((ht-Tt)*A),gt=P-lt,T=bt-1,N=T-gt,K=N>0?N/A:null,st=`swing_${M}_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;await ym(st,H),v(M,{startFrame:gt,contactFrame:T,swingTime:K,videoKey:st,description:W.trim(),cropBox:dt}),alert("Swing saved!"),s&&s()}catch(lt){console.error("[AddSwingForm] save failed:",lt),it(lt.message||"Failed to save swing.")}};return r.jsxs("form",{onSubmit:ft,style:{display:"grid",gap:"12px"},children:[r.jsx("h3",{children:"Add Swing"}),r.jsxs("label",{children:["Hitter:",r.jsxs("select",{value:M,onChange:L=>O(L.target.value),children:[r.jsx("option",{value:"",children:"-- Select Hitter --"}),h.map(L=>r.jsx("option",{value:L.name,children:L.name},L.name))]})]}),r.jsxs("label",{children:["Swing Video:",r.jsx("input",{ref:j,type:"file",accept:"video/*",onChange:k})]}),E&&r.jsx(Tf,{source:E,metadata:{label:`Swing tagging: ${M}`},fps:A,taggable:!0,onTagSwing:({startFrame:L,contactFrame:lt})=>{Number.isFinite(L)&&Q(L),Number.isFinite(lt)&&tt(lt)}}),(P!=null||F!=null)&&r.jsxs("div",{children:["Tagged: start=",P??"—",", contact=",F??"—",dt&&r.jsxs("div",{children:["Crop: x=",Math.round(dt.x),", y=",Math.round(dt.y),", w=",Math.round(dt.w),", h=",Math.round(dt.h)]})]}),r.jsxs("label",{children:["Description:",r.jsx("input",{type:"text",value:W,onChange:L=>nt(L.target.value)})]}),r.jsx("button",{type:"submit",disabled:!M||!q||P==null||F==null,children:"Save Swing"}),ut&&r.jsx("div",{style:{color:"crimson"},children:ut})]})}var Nt;(function(h){h.LOAD="LOAD",h.EXEC="EXEC",h.WRITE_FILE="WRITE_FILE",h.READ_FILE="READ_FILE",h.DELETE_FILE="DELETE_FILE",h.RENAME="RENAME",h.CREATE_DIR="CREATE_DIR",h.LIST_DIR="LIST_DIR",h.DELETE_DIR="DELETE_DIR",h.ERROR="ERROR",h.DOWNLOAD="DOWNLOAD",h.PROGRESS="PROGRESS",h.LOG="LOG"})(Nt||(Nt={}));const Om=(()=>{let h=0;return()=>h++})(),Rm=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Mm=new Error("called FFmpeg.terminate()");class Md{#t=null;#a={};#e={};#u=[];#n=[];loaded=!1;#i=()=>{this.#t&&(this.#t.onmessage=({data:{id:v,type:g,data:s}})=>{switch(g){case Nt.LOAD:this.loaded=!0,this.#a[v](s);break;case Nt.EXEC:case Nt.WRITE_FILE:case Nt.READ_FILE:case Nt.DELETE_FILE:case Nt.RENAME:case Nt.CREATE_DIR:case Nt.LIST_DIR:case Nt.DELETE_DIR:this.#a[v](s);break;case Nt.LOG:this.#u.forEach(A=>A(s));break;case Nt.PROGRESS:this.#n.forEach(A=>A(s));break;case Nt.ERROR:this.#e[v](s);break}delete this.#a[v],delete this.#e[v]})};#l=({type:v,data:g},s=[])=>this.#t?new Promise((A,M)=>{const O=Om();this.#t&&this.#t.postMessage({id:O,type:v,data:g},s),this.#a[O]=A,this.#e[O]=M}):Promise.reject(Rm);on(v,g){v==="log"?this.#u.push(g):v==="progress"&&this.#n.push(g)}off(v,g){v==="log"?this.#u=this.#u.filter(s=>s!==g):v==="progress"&&(this.#n=this.#n.filter(s=>s!==g))}load=(v={})=>(this.#t||(this.#t=new Worker(new URL("/swing-sync-web/assets/worker-RjqUVU6j.js",import.meta.url),{type:"module"}),this.#i()),this.#l({type:Nt.LOAD,data:v}));exec=(v,g=-1)=>this.#l({type:Nt.EXEC,data:{args:v,timeout:g}});terminate=()=>{const v=Object.keys(this.#e);for(const g of v)this.#e[g](Mm),delete this.#e[g],delete this.#a[g];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(v,g)=>{const s=[];return g instanceof Uint8Array&&s.push(g.buffer),this.#l({type:Nt.WRITE_FILE,data:{path:v,data:g}},s)};readFile=(v,g="binary")=>this.#l({type:Nt.READ_FILE,data:{path:v,encoding:g}});deleteFile=v=>this.#l({type:Nt.DELETE_FILE,data:{path:v}});rename=(v,g)=>this.#l({type:Nt.RENAME,data:{oldPath:v,newPath:g}});createDir=v=>this.#l({type:Nt.CREATE_DIR,data:{path:v}});listDir=v=>this.#l({type:Nt.LIST_DIR,data:{path:v}});deleteDir=v=>this.#l({type:Nt.DELETE_DIR,data:{path:v}})}const Xe=new Md({log:!0});async function jm(h){const v=await h.arrayBuffer();return new Uint8Array(v)}function Um({pitchers:h,onAddPitch:v,constants:g={FPS:30},onClose:s}){const A=Number(g?.FPS)||30,[M,O]=w.useState(""),[q,U]=w.useState(null),[E,Y]=w.useState(null),[W,nt]=w.useState(""),[P,Q]=w.useState(null),[F,tt]=w.useState(""),[dt,Z]=w.useState(!1),ut=w.useRef(null),it=w.useCallback($=>{const ft=$.target.files?.[0]||null;U(ft),Q(null),Y(ft?URL.createObjectURL(ft):null)},[]);async function j($,ft,L,lt){if(!Xe.loaded){const H="/swing-sync-web/";await Xe.load({coreURL:H+"ffmpeg/ffmpeg-core.js",wasmURL:H+"ffmpeg/ffmpeg-core.wasm",workerURL:H+"ffmpeg/ffmpeg-core.worker.js"})}await Xe.writeFile("input.webm",await jm($));const Tt=`select='between(n\\,${ft}\\,${L})',setpts=N/FRAME_RATE/TB`;await Xe.exec(["-i","input.webm","-vf",Tt,"-r",String(lt),"-an","-c:v","libvpx","-b:v","1M","clip.webm"]);const ht=await Xe.readFile("clip.webm");return new Blob([ht.buffer],{type:"video/webm"})}const k=async $=>{if($.preventDefault(),tt(""),!M||!q||P==null){tt("Please select pitcher, choose video, and tag contact frame.");return}Z(!0);try{const ft=Math.max(0,P-(2*A-1)),L=P,lt=await j(q,ft,L,A),Tt=`pitch_${M}_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;await hm(Tt,lt),v(M,{contactFrame:L-ft,videoKey:Tt,description:W.trim()}),alert("Pitch saved!"),s&&s()}catch(ft){console.error("[AddPitchForm] save failed:",ft),tt(ft.message||"Failed to save pitch.")}finally{Z(!1);try{await Xe.deleteFile("input.webm"),await Xe.deleteFile("clip.webm")}catch{}}};return r.jsxs("form",{onSubmit:k,style:{display:"grid",gap:"12px"},children:[r.jsx("h3",{children:"Add Pitch"}),r.jsxs("label",{children:["Pitcher:",r.jsxs("select",{value:M,onChange:$=>O($.target.value),children:[r.jsx("option",{value:"",children:"-- Select Pitcher --"}),h.map($=>r.jsx("option",{value:$.name,children:$.name},$.name))]})]}),r.jsxs("label",{children:["Pitch Video:",r.jsx("input",{ref:ut,type:"file",accept:"video/*",onChange:it})]}),E&&r.jsx(Tf,{source:E,metadata:{label:`Pitch tagging: ${M}`},onTagPitchContact:$=>{Number.isFinite($)&&Q($)},taggable:!0}),P!=null&&r.jsxs("div",{children:["Tagged: contact=",P]}),r.jsxs("label",{children:["Description:",r.jsx("input",{type:"text",value:W,onChange:$=>nt($.target.value)})]}),r.jsx("button",{type:"submit",disabled:!M||!q||P==null||dt,children:dt?"Saving…":"Save Pitch"}),F&&r.jsx("div",{style:{color:"crimson"},children:F})]})}const Bt=new Md({log:!0}),hf="/swing-sync-web/ffmpeg/";async function yf(h){if(!h)throw new Error("Null blob passed to toU8");const v=await h.arrayBuffer();return new Uint8Array(v)}function mf(h,v){const g=URL.createObjectURL(h),s=document.createElement("a");s.href=g,s.download=v,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(g)}async function vf(h){let v=0,g="";Bt.on("log",({message:A})=>{A.includes("Duration:")&&(g=A)}),await Bt.exec(["-i",h]);const s=g.match(/Duration:\s*(\d+):(\d+):([\d.]+)/);if(s){const A=parseInt(s[1],10),M=parseInt(s[2],10),O=parseFloat(s[3]);v=A*3600+M*60+O}return Math.round(v*30)}function Nm(h,v,g){if(!h)return"";const s=h.teamName?` — ${h.teamName}`:"",A=h.description?` (${h.description})`:"",M=g!=null?v.filter(q=>q.hitterName===h.name)[g]:null;let O="";return M&&Number.isFinite(M.startFrame)&&(O=`swing start frame ${M.startFrame}`,M.description&&(O+=` — ${M.description}`)),`${h.name}${s}${A}${O?" — "+O:""}`}function Hm(h,v,g){if(!h)return"";const s=h.teamName?` — ${h.teamName}`:"",A=h.description?` (${h.description})`:"",M=g!=null?v[g]:null;let O="";return M?.description&&(O=M.description),`${h.name}${s}${A}${O?" — "+O:""}`}function Cm({hitters:h,swings:v,pitchers:g,pitches:s,matchups:A,setMatchups:M,requestLoadVideoInTagger:O}){const[q,U]=w.useState(""),[E,Y]=w.useState(null),[W,nt]=w.useState(""),[P,Q]=w.useState(null),[F,tt]=w.useState(""),[dt,Z]=w.useState(!1),[ut,it]=w.useState(""),[j,k]=w.useState(null),[$,ft]=w.useState(null),L=q&&E!=null&&W&&P!=null?`${q}_${E}_vs_${W}_${P}`:null,lt=w.useMemo(()=>s.filter(H=>H.pitcherName===W),[s,W]);w.useEffect(()=>{if(!L){k(null),ft(null);return}(async()=>{const[H,bt]=await Promise.all([bf(`${L}_sideBySide`),bf(`${L}_pitcherOnly`)]);H&&k(H),bt&&ft(bt)})()},[L]);async function Tt(){if(tt(""),it(""),!L){tt("Select a swing and pitch first.");return}if(j&&$){it("Reusing cached matchup clips."),O(j,"Cached matchup");return}const H=v.filter(T=>T.hitterName===q)[E],bt=lt[P];if(!bt?.videoKey){tt("Missing pitch data.");return}if(!H?.videoKey){tt("Missing swing data.");return}const gt=Number.isFinite(H.startFrame)?H.startFrame:null;if(gt===null||gt<0){tt("Invalid swing start frame: must be a non-negative number.");return}try{if(!Bt.loaded){it("Loading FFmpeg core...");const tl="/swing-sync-web/ffmpeg/";await Bt.load({coreURL:tl+"ffmpeg-core.js",wasmURL:tl+"ffmpeg-core.wasm",workerURL:tl+"ffmpeg-core.worker.js"})}Bt.on("log",({message:tl})=>{it(Ze=>Ze+`
dist\assets\index-BetTNchG.js:`+tl)});const T=await Vn(bt.videoKey);await Bt.writeFile("pitch.webm",await yf(T));const N=await Od(H.videoKey);await Bt.writeFile("swing.webm",await yf(N));const K=await vf("pitch.webm"),st=await vf("swing.webm");if(K<=0||st<=0){tt("Invalid video: zero frames detected.");return}const o=30,_=st-gt,C=K-_,B=K-_,R=Nm(h.find(tl=>tl.name===q),v,E),G=Hm(g.find(tl=>tl.name===W),lt,P);it("Generating side-by-side..."),await Bt.exec(["-y","-i","pitch.webm","-i","swing.webm","-filter_complex",`[0:v]fps=${o},drawbox=0:0:iw:ih:yellow@0.3:t=fill:enable='between(n,${B},${B+2})'[pitcher];[1:v]trim=start_frame=${gt},setpts=PTS-STARTPTS,fps=${o}[swingtrim];[1:v]trim=start_frame=${gt}:end_frame=${gt+1},setpts=PTS-STARTPTS,fps=${o},loop=${C}:1:0[freeze];[freeze][swingtrim]concat=n=2:v=1:a=0[hitter];[pitcher][hitter]hstack=inputs=2:shortest=0[v]`,"-map","[v]","-c:v","libx264","-preset","ultrafast","-crf","28","out_side.mp4"]);const V=await Bt.readFile("out_side.mp4"),Rt=new Blob([V.buffer],{type:"video/mp4"});k(Rt),await zd(`${L}_sideBySide`,Rt),O(Rt,`${R} vs ${G}`),it("Generating pitcher-only..."),await Bt.exec(["-y","-i","pitch.webm","-vf",`fps=${o},drawbox=0:0:iw:ih:yellow@0.3:t=fill:enable='between(n,${B},${B+2})'`,"-c:v","libx264","-preset","ultrafast","-crf","28","out_pitcher.mp4"]);const St=await Bt.readFile("out_pitcher.mp4"),Jt=new Blob([St.buffer],{type:"video/mp4"});ft(Jt),await zd(`${L}_pitcherOnly`,Jt),it("Done!")}catch(T){console.error("FFmpeg error:",T),tt(`Failed to generate matchup: ${T.message||"Unknown FFmpeg error"}`)}finally{Z(!1);try{await Bt.deleteFile("pitch.webm"),await Bt.deleteFile("swing.webm"),await Bt.deleteFile("out_side.mp4"),await Bt.deleteFile("out_pitcher.mp4")}catch{}}}async function ht(){if(!L){tt("No matchup selected.");return}try{Bt.loaded||(it("Loading FFmpeg core..."),await Bt.load({coreURL:hf+"ffmpeg-core.js",wasmURL:hf+"ffmpeg-core.wasm",workerURL:hf+"ffmpeg-core.worker.js"}));const H=lt[P];if(!H?.videoKey)return tt("Missing pitch data.");const bt=await Vn(H.videoKey);await Bt.writeFile("pitch.webm",await yf(bt));const gt=await vf("pitch.webm"),N=v.filter(C=>C.hitterName===q)[E].startFrame??0,st=gt-30;await Bt.exec(["-y","-i","pitch.webm","-vf",`select='eq(n,${st})'`,"-vframes","1","frame.png"]);const o=await Bt.readFile("frame.png"),_=new Blob([o.buffer],{type:"image/png"});mf(_,`${L}_pitcherFrame.png`);try{await Bt.deleteFile("pitch.webm"),await Bt.deleteFile("frame.png")}catch{}}catch(H){console.error(H),tt("Failed to export pitcher frame.")}}return r.jsxs("div",{children:[r.jsx("h2",{children:"Matchup Simulator"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[r.jsxs("select",{value:q,onChange:H=>U(H.target.value),children:[r.jsx("option",{value:"",children:"-- select hitter --"}),h.map(H=>r.jsxs("option",{value:H.name,children:[H.name,H.teamName?` — ${H.teamName}`:"",H.description?` (${H.description})`:""]},H.name))]}),r.jsxs("select",{disabled:!q,value:E??"",onChange:H=>Y(Number(H.target.value)),children:[r.jsx("option",{value:"",children:"-- select swing --"}),v.filter(H=>H.hitterName===q).map((H,bt)=>r.jsxs("option",{value:bt,children:["Swing ",bt+1,Number.isFinite(H.startFrame)?` (start frame ${H.startFrame})`:"",H.description?` — ${H.description}`:""]},bt))]}),r.jsxs("select",{value:W,onChange:H=>nt(H.target.value),children:[r.jsx("option",{value:"",children:"-- select pitcher --"}),g.map(H=>r.jsxs("option",{value:H.name,children:[H.name,H.teamName?` — ${H.teamName}`:"",H.description?` (${H.description})`:""]},H.name))]}),r.jsxs("select",{disabled:!W,value:P??"",onChange:H=>Q(Number(H.target.value)),children:[r.jsx("option",{value:"",children:"-- select pitch --"}),lt.map((H,bt)=>r.jsxs("option",{value:bt,children:["Pitch ",bt+1,H.description?` — ${H.description}`:""]},bt))]})]}),r.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,flexWrap:"wrap"},children:[r.jsx("button",{onClick:Tt,disabled:dt,children:"Generate Matchup"}),r.jsx("button",{onClick:()=>j&&mf(j,`${q}_vs_${W}_sidebyside.mp4`),disabled:!j,children:"Export Side-by-Side"}),r.jsx("button",{onClick:()=>$&&mf($,`${q}_vs_${W}_pitcheronly.mp4`),disabled:!$,children:"Export Pitcher-Only"}),r.jsx("button",{onClick:ht,disabled:!$,children:"Export Pitcher Frame"})]}),ut&&r.jsx("pre",{style:{color:"blue",whiteSpace:"pre-wrap"},children:ut}),F&&r.jsx("div",{style:{color:"red"},children:F})]})}async function gf(h){let v=await h;return v?((!(v instanceof Blob)||!v.type)&&(v=new Blob([v],{type:"video/webm"})),v):null}function Bm({hitters:h,swings:v,pitchers:g,pitches:s,matchups:A,requestLoadVideoInTagger:M,onDeleteSwing:O,onDeletePitch:q,onDeleteMatchup:U}){const[E,Y]=w.useState(v),[W,nt]=w.useState(s),[P,Q]=w.useState(A),[F,tt]=w.useState([]);w.useEffect(()=>Y(v),[v]),w.useEffect(()=>nt(s),[s]),w.useEffect(()=>Q(A),[A]),w.useEffect(()=>{async function Z(){const ut=await vm(),it=new Set(P.map(k=>k.videoKey)),j=ut.filter(k=>!it.has(k));tt(j)}Z()},[P]);function dt(Z,ut){const it=E.find((lt,Tt)=>lt.hitterName===Z.hitterName&&Tt===Z.swingIndex),j=W.find((lt,Tt)=>lt.pitcherName===Z.pitcherName&&Tt===Z.pitchIndex),k=it?.swingTime?`time ${it.swingTime.toFixed(3)}s`:"no time",$=j?.description||"no description",ft=Z.videoKey?.includes("sideBySide")?"Side-by-Side":"Pitcher-Only",L=typeof Z.globalIndex=="number"?Z.globalIndex:ut;return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsxs("span",{style:{flex:1},children:[Z.hitterName," — Swing ",Z.swingIndex+1," (",k,") vs"," ",Z.pitcherName," — Pitch ",Z.pitchIndex+1," (",$,") • ",ft]}),r.jsx("button",{type:"button",onClick:async()=>{const lt=await gf(bf(Z.videoKey));if(!lt)return alert("No clip found.");M(lt,`Matchup: ${Z.hitterName} vs ${Z.pitcherName}`)},children:"Preview"}),r.jsx("button",{type:"button",onClick:async()=>{if(window.confirm("Delete this matchup?"))try{Z.videoKey&&await Rd(Z.videoKey),Q(lt=>lt.filter((Tt,ht)=>ht!==ut)),U(L)}catch(lt){console.error("Delete matchup failed:",lt),alert("Failed to delete matchup from storage.")}},children:"Delete"})]},`matchup-${L}`)}return r.jsxs("div",{style:{display:"grid",gap:16},children:[r.jsxs("div",{children:[r.jsx("h3",{children:"Swings & Matchups by Hitter"}),h.length===0?r.jsx("div",{style:{fontSize:12,opacity:.7},children:"No hitters added."}):h.map(Z=>{const ut=E.map((j,k)=>({...j,globalIndex:k})).filter(j=>j.hitterName===Z.name),it=P.map((j,k)=>({...j,globalIndex:k})).filter(j=>j.hitterName===Z.name);return r.jsxs("details",{children:[r.jsxs("summary",{children:[r.jsx("strong",{children:Z.name})," • ",ut.length," swings,"," ",it.length," matchups"]}),r.jsxs("div",{style:{paddingLeft:14},children:[ut.length===0?r.jsx("div",{style:{fontSize:12,opacity:.7},children:"No swings."}):ut.map((j,k)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsxs("span",{style:{flex:1},children:["Swing ",k+1," • ",j.videoKey?"saved":"no clip",j.description?` — ${j.description}`:""]}),j.videoKey&&r.jsx("button",{type:"button",onClick:async()=>{const $=await gf(Od(j.videoKey));if(!$)return alert("No clip found.");M($,`${Z.name} Swing ${k+1}`)},children:"Preview"}),r.jsx("button",{type:"button",onClick:()=>{window.confirm("Delete this swing?")&&(Y($=>$.filter((ft,L)=>L!==j.globalIndex)),O(j.globalIndex))},children:"Delete"})]},`${Z.name}-swing-${k}`)),it.length===0?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{marginTop:6,fontWeight:"bold"},children:"Matchups"}),it.map((j,k)=>dt(j,k))]})]})]},Z.name)})]}),r.jsxs("div",{children:[r.jsx("h3",{children:"Pitches & Matchups by Pitcher"}),g.length===0?r.jsx("div",{style:{fontSize:12,opacity:.7},children:"No pitchers added."}):g.map(Z=>{const ut=W.filter(j=>j.pitcherName===Z.name),it=P.map((j,k)=>({...j,globalIndex:k})).filter(j=>j.pitcherName===Z.name);return r.jsxs("details",{children:[r.jsxs("summary",{children:[r.jsx("strong",{children:Z.name})," • ",ut.length," pitches,"," ",it.length," matchups"]}),r.jsxs("div",{style:{paddingLeft:14},children:[ut.length===0?r.jsx("div",{style:{fontSize:12,opacity:.7},children:"No pitches."}):ut.map((j,k)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsxs("span",{style:{flex:1},children:["Pitch ",k+1," • ",j.videoKey?"saved":"no clip",j.description?` — ${j.description}`:""]}),j.videoKey&&r.jsx("button",{type:"button",onClick:async()=>{const $=await gf(Vn(j.videoKey));if(!$)return alert("No clip found.");M($,`${Z.name} Pitch ${k+1}`)},children:"Preview"}),r.jsx("button",{type:"button",onClick:async()=>{if(window.confirm("Delete this pitch?"))try{j.videoKey&&await Dd(j.videoKey),nt($=>$.filter((ft,L)=>!(j.pitcherName===Z.name&&L===k))),q(Z.name,k)}catch($){console.error("Delete pitch failed:",$),alert("Failed to delete pitch from storage.")}},children:"Delete"})]},`${Z.name}-pitch-${k}`)),it.length===0?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{marginTop:6,fontWeight:"bold"},children:"Matchups"}),it.map((j,k)=>dt(j,k))]})]})]},Z.name)})]}),r.jsxs("div",{children:[r.jsx("h3",{children:"All Matchups"}),P.length===0?r.jsx("div",{style:{fontSize:12,opacity:.7},children:"No matchups saved."}):P.map((Z,ut)=>dt(Z,ut))]})]})}function Ee({open:h,onClose:v,title:g,children:s}){return h?r.jsxs("div",{style:{position:"fixed",inset:0,background:"#fff",zIndex:1e3,display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{flex:"0 0 auto",padding:"1rem",background:"#222",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:g}),r.jsx("button",{onClick:v,style:{background:"transparent",border:"none",color:"#fff",fontSize:"1.5rem"},children:"✕"})]}),r.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",padding:"1rem"},children:s})]}):null}const wm="/swing-sync-web/swing-sync-logo.png",Sf=30,jd="SwingSync.state";function qm(){try{const h=localStorage.getItem(jd);return h?JSON.parse(h):null}catch{return null}}function Ym(h){try{localStorage.setItem(jd,JSON.stringify(h))}catch{}}function Lm(){const[h,v]=w.useState([]),[g,s]=w.useState([]),[A,M]=w.useState([]),[O,q]=w.useState([]),[U,E]=w.useState([]),[Y,W]=w.useState(!1),[nt,P]=w.useState([]),[Q,F]=w.useState(null),[tt,dt]=w.useState(!1),[Z,ut]=w.useState(null),[it,j]=w.useState(""),k=w.useRef(null),[$,ft]=w.useState(null),[L,lt]=w.useState(null),Tt=w.useCallback(()=>{ft(null),lt(null)},[]);w.useEffect(()=>{const R=qm();R&&(v(R.hitters||[]),s(R.pitchers||[]),M(R.swings||[]),q(R.pitches||[]),E(R.teams||[]),P(R.matchups||[])),W(!0)},[]),w.useEffect(()=>{Y&&Ym({hitters:h,pitchers:g,swings:A,pitches:O,teams:U,matchups:nt})},[Y,h,g,A,O,U,nt]);const ht=w.useCallback(()=>{if(k.current){try{URL.revokeObjectURL(k.current)}catch{}k.current=null}},[]);w.useEffect(()=>()=>ht(),[ht]);const H=w.useCallback((R,G="")=>{if(j(G||""),!R){ht(),ut(null),dt(!0);return}if(typeof R=="string"){ht(),k.current=null,ut(R),dt(!0);return}if(R instanceof File||R instanceof Blob)try{const V=URL.createObjectURL(R);ht(),k.current=V,ut(V),dt(!0);return}catch(V){console.error("Error creating object URL for File/Blob:",V),ht(),ut(null),dt(!0);return}console.warn("Unsupported video source passed:",R)},[ht]),bt=(R,G={})=>bm(h,R)?!1:(v([...h,{...gm(R),...G}]),!0),gt=(R,G={})=>pm(g,R)?!1:(s([...g,{...Sm(R),...G}]),!0),T=(R,G)=>{M([...A,{hitterName:R,...G}])},N=(R,G)=>{q([...O,{pitcherName:R,...G}])},K=(R,G="")=>U.some(V=>V.name.toLowerCase()===R.toLowerCase())?!1:(E([...U,{name:R,description:G}]),!0),st=R=>E(U.filter(G=>G.name!==R)),o=R=>{s(g.filter(G=>G.name!==R)),q(O.filter(G=>G.pitcherName!==R))},_=w.useCallback(async R=>{const G=A[R];if(G){if(G.videoKey)try{await mm(G.videoKey)}catch(V){console.warn("Failed to delete swing clip",G.videoKey,V)}M(V=>V.filter((Rt,St)=>St!==R))}},[A]),C=w.useCallback(async(R,G)=>{const Rt=O.filter(Jt=>Jt.pitcherName===R)[G];if(!Rt)return;if(Rt.videoKey)try{await Dd(Rt.videoKey)}catch(Jt){console.warn("Failed to delete pitch clip",Rt.videoKey,Jt)}let St=-1;q(Jt=>Jt.filter(tl=>tl.pitcherName!==R?!0:(St++,St!==G)))},[O]),B=w.useCallback(async R=>{P(G=>{const V=G[R];return V?.videoKey&&Rd(V.videoKey).catch(Rt=>console.warn("Failed to delete matchup clip",V.videoKey,Rt)),G.filter((Rt,St)=>St!==R)})},[]);return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2rem",fontFamily:"Arial, sans-serif"},children:[r.jsx("img",{src:wm,alt:"SwingSync Logo",style:{height:100,marginBottom:20}}),r.jsxs("div",{className:"menu-container",children:[r.jsx("button",{onClick:()=>F("matchup"),children:"Matchup Simulator"}),r.jsx("button",{onClick:()=>F("swing"),children:"Add Swing"}),r.jsx("button",{onClick:()=>F("pitch"),children:"Add Pitch"}),r.jsx("button",{onClick:()=>F("hitters"),children:"Hitters"}),r.jsx("button",{onClick:()=>F("pitchers"),children:"Pitchers"}),r.jsx("button",{onClick:()=>F("teams"),children:"Teams"}),r.jsx("button",{onClick:()=>F("clips"),children:"Clips Library"}),r.jsx("button",{onClick:()=>dt(!0),style:{display:"none"},children:"Video Player"}),r.jsx("button",{style:{display:"none",background:"crimson",color:"white"},onClick:()=>{window.confirm("Delete ALL saved clips (swings, pitches, matchups)?")&&(Em(),M([]),q([]),v([]),s([]),P([]),alert("All clips and state cleared."))},children:"Reset All Clips"})]}),r.jsx(Ee,{open:Q==="teams",onClose:()=>F(null),title:"Teams",children:r.jsx(Am,{onAddTeam:K,onDeleteTeam:st,teams:U})}),r.jsx(Ee,{open:Q==="matchup",onClose:()=>F(null),title:"Matchup Simulator",children:r.jsx(Cm,{hitters:h,swings:A,pitchers:g,pitches:O,matchups:nt,setMatchups:P,requestLoadVideoInTagger:H})}),r.jsx(Ee,{open:Q==="swing",onClose:()=>F(null),title:"Add Swing",children:r.jsx(Dm,{hitters:h,onAddSwing:T,teams:U,constants:{FPS:Sf},requestLoadVideoInTagger:H,taggedStartFrame:$,taggedContactFrame:L,clearTags:Tt,onClose:()=>F(null)})}),r.jsx(Ee,{open:Q==="pitch",onClose:()=>F(null),title:"Add Pitch",children:r.jsx(Um,{pitchers:g,onAddPitch:N,teams:U,constants:{FPS:Sf},requestLoadVideoInTagger:H,onClose:()=>F(null)})}),r.jsx(Ee,{open:Q==="hitters",onClose:()=>F(null),title:"Hitters",children:r.jsx(om,{onAddHitter:bt,teams:U})}),r.jsx(Ee,{open:Q==="pitchers",onClose:()=>F(null),title:"Pitchers",children:r.jsx(Tm,{pitchers:g,pitches:O,onAddPitcher:gt,onDeletePitcher:o,onDeletePitch:C,requestLoadVideoInTagger:H,teams:U})}),r.jsx(Ee,{open:Q==="clips",onClose:()=>F(null),title:"Clips Library",children:r.jsx(Bm,{hitters:h,swings:A,pitchers:g,pitches:O,matchups:nt,requestLoadVideoInTagger:H,onDeleteSwing:_,onDeletePitch:C,onDeleteMatchup:B})}),r.jsx(Ee,{open:tt,onClose:()=>{dt(!1),ht(),ut(null),j("")},title:"Video Player",children:r.jsx("div",{style:{width:"100%",height:"100%",maxHeight:"80vh",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:r.jsx(Tf,{source:Z,metadata:{label:it},fps:Sf,onTagSwing:({startFrame:R,contactFrame:G})=>{R!=null&&ft(R),G!=null&&lt(G)},style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})})]})}sm.createRoot(document.getElementById("root")).render(r.jsx(w.StrictMode,{children:r.jsx(Lm,{})}));
dist\assets\worker-RjqUVU6j.js:(function(){"use strict";const a="https://unpkg.com/@ffmpeg/core@0.12.1/dist/umd/ffmpeg-core.js";var o;(function(r){r.LOAD="LOAD",r.EXEC="EXEC",r.WRITE_FILE="WRITE_FILE",r.READ_FILE="READ_FILE",r.DELETE_FILE="DELETE_FILE",r.RENAME="RENAME",r.CREATE_DIR="CREATE_DIR",r.LIST_DIR="LIST_DIR",r.DELETE_DIR="DELETE_DIR",r.ERROR="ERROR",r.DOWNLOAD="DOWNLOAD",r.PROGRESS="PROGRESS",r.LOG="LOG"})(o||(o={}));const i=new Error("unknown message type"),f=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),D=new Error("failed to import ffmpeg-core.js");let e;const L=async({coreURL:r=a,wasmURL:s,workerURL:E})=>{const n=!e,t=r,c=s||r.replace(/.js$/g,".wasm"),_=E||r.replace(/.js$/g,".worker.js");try{importScripts(t)}catch{if(self.createFFmpegCore=(await import(t)).default,!self.createFFmpegCore)throw D}return e=await self.createFFmpegCore({mainScriptUrlOrBlob:`${t}#${btoa(JSON.stringify({wasmURL:c,workerURL:_}))}`}),e.setLogger(R=>self.postMessage({type:o.LOG,data:R})),e.setProgress(R=>self.postMessage({type:o.PROGRESS,data:R})),n},l=({args:r,timeout:s=-1})=>{e.setTimeout(s),e.exec(...r);const E=e.ret;return e.reset(),E},O=({path:r,data:s})=>(e.FS.writeFile(r,s),!0),I=({path:r,encoding:s})=>e.FS.readFile(r,{encoding:s}),m=({path:r})=>(e.FS.unlink(r),!0),u=({oldPath:r,newPath:s})=>(e.FS.rename(r,s),!0),S=({path:r})=>(e.FS.mkdir(r),!0),A=({path:r})=>{const s=e.FS.readdir(r),E=[];for(const n of s){const t=e.FS.stat(`${r}/${n}`),c=e.FS.isDir(t.mode);E.push({name:n,isDir:c})}return E},w=({path:r})=>(e.FS.rmdir(r),!0);self.onmessage=async({data:{id:r,type:s,data:E}})=>{const n=[];let t;try{if(s!==o.LOAD&&!e)throw f;switch(s){case o.LOAD:t=await L(E);break;case o.EXEC:t=l(E);break;case o.WRITE_FILE:t=O(E);break;case o.READ_FILE:t=I(E);break;case o.DELETE_FILE:t=m(E);break;case o.RENAME:t=u(E);break;case o.CREATE_DIR:t=S(E);break;case o.LIST_DIR:t=A(E);break;case o.DELETE_DIR:t=w(E);break;default:throw i}}catch(c){self.postMessage({id:r,type:o.ERROR,data:c.toString()});return}t instanceof Uint8Array&&n.push(t.buffer),self.postMessage({id:r,type:s,data:t},n)}})();
dist\ffmpeg\ffmpeg-core.worker.js:gtag('config', 'UA-140352188-1');</script></head><body><header class="border-b border-slate-300 bg-slate-100 text-slate-950"><div class="p-4 mx-auto flex justify-between items-center lg:max-w-screen-xl"><h1 class="text-2xl font-bold inline-block"><a href="https://unpkg.com">UNPKG</a></h1><span class="inline-block h-full"><a href="https://github.com/unpkg"><svg aria-hidden="true" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path fill-rule="evenodd" d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z" clip-rule="evenodd"></path></svg></a></span></div></header><main class="px-4 pb-24 mx-auto lg:max-w-screen-xl lg:pb-44"><header class="pt-6 pb-4 lg:pt-16"><div class="mb-6 flex justify-between items-center"><h1 class="text-black text-3xl leading-tight font-semibold">@ffmpeg/core-mt</h1><div class="text-right w-48"><span>Version: </span><span data-hydrate="{&quot;key&quot;:&quot;VersionSelector&quot;,&quot;props&quot;:{&quot;availableTags&quot;:{&quot;next&quot;:&quot;0.12.2-alpha.3&quot;,&quot;latest&quot;:&quot;0.12.10&quot;},&quot;availableVersions&quot;:[&quot;0.12.10&quot;,&quot;0.12.9&quot;,&quot;0.12.8&quot;,&quot;0.12.6&quot;,&quot;0.12.5&quot;,&quot;0.12.4&quot;,&quot;0.12.3&quot;,&quot;0.12.2&quot;,&quot;0.12.2-alpha.3&quot;,&quot;0.12.2-alpha.2&quot;,&quot;0.12.2-alpha.1&quot;,&quot;0.12.1&quot;],&quot;currentVersion&quot;:&quot;0.12.6&quot;,&quot;pathnameFormat&quot;:&quot;/@ffmpeg/core-mt@%s/files/dist/esm/ffmpeg-core.worker.js&quot;,&quot;class&quot;:&quot;w-28 p-1 border border-slate-300 bg-slate-100 text-sm&quot;}}"><select name="version" class="w-28 p-1 border border-slate-300 bg-slate-100 text-sm"><optgroup label="Tags"><option value="0.12.10">latest (0.12.10)</option><option value="0.12.2-alpha.3">next (0.12.2-alpha.3)</option></optgroup><optgroup label="Versions"><option value="0.12.10">0.12.10</option><option value="0.12.9">0.12.9</option><option value="0.12.8">0.12.8</option><option selected value="0.12.6">0.12.6</option><option value="0.12.5">0.12.5</option><option value="0.12.4">0.12.4</option><option value="0.12.3">0.12.3</option><option value="0.12.2">0.12.2</option><option value="0.12.2-alpha.3">0.12.2-alpha.3</option><option value="0.12.2-alpha.2">0.12.2-alpha.2</option><option value="0.12.2-alpha.1">0.12.2-alpha.1</option><option value="0.12.1">0.12.1</option></optgroup></select></span></div></div><div class="mt-2"><p class="mb-3 leading-tight"><span>FFmpeg WebAssembly version (multi thread)</span></p><div class="lg:hidden"><p class="mt-1 text-sm leading-4"><a href="https://github.com/ffmpegwasm/ffmpeg.wasm#readme" title="Visit the @ffmpeg/core-mt website" class="inline-flex items-center hover:text-slate-950 hover:underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" class="w-6 h-6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.213 9.787a3.391 3.391 0 0 0-4.795 0l-3.425 3.426a3.39 3.39 0 0 0 4.795 4.794l.321-.304m-.321-4.49a3.39 3.39 0 0 0 4.795 0l3.424-3.426a3.39 3.39 0 0 0-4.794-4.795l-1.028.961"></path></svg><span class="ml-1">github.com/ffmpegwasm/ffmpeg.wasm</span></a></p><p class="mt-1 text-sm leading-4"><a href="https://github.com/ffmpegwasm/ffmpeg.wasm" title="View the @ffmpeg/core-mt repository on GitHub" class="inline-flex items-center hover:text-slate-950 hover:underline"><svg aria-hidden="true" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path fill-rule="evenodd" d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z" clip-rule="evenodd"></path></svg><span class="ml-1">ffmpegwasm/ffmpeg.wasm</span></a></p></div></div></header><nav class="py-2"><span><a href="https://app.unpkg.com/@ffmpeg/core-mt@0.12.6" class="text-blue-600 hover:underline">@ffmpeg/core-mt</a></span><span> / </span><span><a href="https://app.unpkg.com/@ffmpeg/core-mt@0.12.6/files/dist" class="text-blue-600 hover:underline">dist</a></span><span> / </span><span><a href="https://app.unpkg.com/@ffmpeg/core-mt@0.12.6/files/dist/esm" class="text-blue-600 hover:underline">esm</a></span><span> / </span><span>ffmpeg-core.worker.js</span></nav><div class="p-3 border border-slate-300 bg-slate-100 text-sm flex justify-between select-none"><div class="w-64"><span><span>2 lines </span><span>(1 loc) </span><span>• </span></span><span>2.82 kB</span></div><div class="hidden flex-grow sm:block text-center">JavaScript</div><div class="w-64 hidden sm:block text-right"><a href="https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm/ffmpeg-core.worker.js" class="py-1 px-2 border border-slate-300 bg-slate-100 hover:bg-slate-200 rounded-sm">View Raw</a></div></div><div data-hydrate="{&quot;key&quot;:&quot;CodeViewer&quot;,&quot;props&quot;:{&quot;html&quot;:&quot;&lt;span class=\&quot;hljs-meta\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>={};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-variable constant_\&quot;>ENVIRONMENT_IS_NODE&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> process==&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;object&amp;quot;&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> process.&lt;span class=\&quot;hljs-property\&quot;>versions&lt;/span>==&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;object&amp;quot;&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> process.&lt;span class=\&quot;hljs-property\&quot;>versions&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>node&lt;/span>==&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;string&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-variable constant_\&quot;>ENVIRONMENT_IS_NODE&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> nodeWorkerThreads=&lt;span class=\&quot;hljs-built_in\&quot;>require&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;worker_threads&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> parentPort=nodeWorkerThreads.&lt;span class=\&quot;hljs-property\&quot;>parentPort&lt;/span>;parentPort.&lt;span class=\&quot;hljs-title function_\&quot;>on&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;message&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>data&lt;/span>=&amp;gt;&lt;/span>&lt;span class=\&quot;hljs-title function_\&quot;>onmessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>data&lt;/span>:data}));&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> fs=&lt;span class=\&quot;hljs-built_in\&quot;>require&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;fs&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>assign&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>global&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>self&lt;/span>:&lt;span class=\&quot;hljs-variable language_\&quot;>global&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>require&lt;/span>:&lt;span class=\&quot;hljs-built_in\&quot;>require&lt;/span>,&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>location&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>href&lt;/span>:__filename},&lt;span class=\&quot;hljs-title class_\&quot;>Worker&lt;/span>:nodeWorkerThreads.&lt;span class=\&quot;hljs-property\&quot;>Worker&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>importScripts&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>f&lt;/span>){(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-built_in\&quot;>eval&lt;/span>)(fs.&lt;span class=\&quot;hljs-title function_\&quot;>readFileSync&lt;/span>(f,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;utf8&amp;quot;&lt;/span>)+&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;//# sourceURL=&amp;quot;&lt;/span>+f)},&lt;span class=\&quot;hljs-attr\&quot;>postMessage&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>msg&lt;/span>){parentPort.&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>(msg)},&lt;span class=\&quot;hljs-attr\&quot;>performance&lt;/span>:&lt;span class=\&quot;hljs-variable language_\&quot;>global&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>performance&lt;/span>||{&lt;span class=\&quot;hljs-attr\&quot;>now&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>now&lt;/span>()}}})}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> initializedJS=&lt;span class=\&quot;hljs-literal\&quot;>false&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>threadPrintErr&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> text=&lt;span class=\&quot;hljs-title class_\&quot;>Array&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>&lt;span class=\&quot;hljs-keyword\&quot;>prototype&lt;/span>&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>slice&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>call&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>join&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot; &amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-variable constant_\&quot;>ENVIRONMENT_IS_NODE&lt;/span>){fs.&lt;span class=\&quot;hljs-title function_\&quot;>writeSync&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>,text+&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;\\n&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>}&lt;span class=\&quot;hljs-variable language_\&quot;>console&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>error&lt;/span>(text)}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>threadAlert&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> text=&lt;span class=\&quot;hljs-title class_\&quot;>Array&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>&lt;span class=\&quot;hljs-keyword\&quot;>prototype&lt;/span>&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>slice&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>call&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>join&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot; &amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>cmd&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;alert&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>text&lt;/span>:text,&lt;span class=\&quot;hljs-attr\&quot;>threadId&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;_pthread_self&amp;quot;&lt;/span>]()})}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> err=threadPrintErr;self.&lt;span class=\&quot;hljs-property\&quot;>alert&lt;/span>=threadAlert;&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;instantiateWasm&amp;quot;&lt;/span>]=&lt;span class=\&quot;hljs-function\&quot;>(&lt;span class=\&quot;hljs-params\&quot;>info,receiveInstance&lt;/span>)=&amp;gt;&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-variable language_\&quot;>module&lt;/span>=&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmModule&amp;quot;&lt;/span>];&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmModule&amp;quot;&lt;/span>]=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> instance=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>WebAssembly&lt;/span>.&lt;span class=\&quot;hljs-title class_\&quot;>Instance&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>module&lt;/span>,info);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>receiveInstance&lt;/span>(instance)};self.&lt;span class=\&quot;hljs-property\&quot;>onunhandledrejection&lt;/span>=&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>=&amp;gt;&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>reason&lt;/span>??e};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>handleMessage&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>try&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;load&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>let&lt;/span> messageQueue=[];self.&lt;span class=\&quot;hljs-property\&quot;>onmessage&lt;/span>=&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>=&amp;gt;&lt;/span>messageQueue.&lt;span class=\&quot;hljs-title function_\&quot;>push&lt;/span>(e);self.&lt;span class=\&quot;hljs-property\&quot;>startWorker&lt;/span>=&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>instance&lt;/span>=&amp;gt;&lt;/span>{&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>=instance;&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cmd&amp;quot;&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;loaded&amp;quot;&lt;/span>});&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>let&lt;/span> msg &lt;span class=\&quot;hljs-keyword\&quot;>of&lt;/span> messageQueue){&lt;span class=\&quot;hljs-title function_\&quot;>handleMessage&lt;/span>(msg)}self.&lt;span class=\&quot;hljs-property\&quot;>onmessage&lt;/span>=handleMessage};&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmModule&amp;quot;&lt;/span>]=e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>wasmModule&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>const&lt;/span> handler &lt;span class=\&quot;hljs-keyword\&quot;>of&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>handlers&lt;/span>){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[handler]=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>cmd&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;callHandler&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>handler&lt;/span>:handler,&lt;span class=\&quot;hljs-attr\&quot;>args&lt;/span>:[...&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>]})}}&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmMemory&amp;quot;&lt;/span>]=e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>wasmMemory&lt;/span>;&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;buffer&amp;quot;&lt;/span>]=&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmMemory&amp;quot;&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>;&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;ENVIRONMENT_IS_PTHREAD&amp;quot;&lt;/span>]=&lt;span class=\&quot;hljs-literal\&quot;>true&lt;/span>;(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>urlOrBlob&lt;/span>?&lt;span class=\&quot;hljs-keyword\&quot;>import&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>urlOrBlob&lt;/span>):&lt;span class=\&quot;hljs-keyword\&quot;>import&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;./ffmpeg-core.js&amp;quot;&lt;/span>)).&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>exports&lt;/span>=&amp;gt;&lt;/span>&lt;span class=\&quot;hljs-built_in\&quot;>exports&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>default&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>))}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;run&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_init&amp;quot;&lt;/span>](e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>pthread_ptr&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>);&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_mailbox_await&amp;quot;&lt;/span>](e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>pthread_ptr&lt;/span>);&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;establishStackSpace&amp;quot;&lt;/span>]();&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;PThread&amp;quot;&lt;/span>].&lt;span class=\&quot;hljs-title function_\&quot;>receiveObjectTransfer&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>);&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;PThread&amp;quot;&lt;/span>].&lt;span class=\&quot;hljs-title function_\&quot;>threadInitTLS&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!initializedJS){initializedJS=&lt;span class=\&quot;hljs-literal\&quot;>true&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>try&lt;/span>{&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;invokeEntryPoint&amp;quot;&lt;/span>](e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>start_routine&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>arg&lt;/span>)}&lt;span class=\&quot;hljs-keyword\&quot;>catch&lt;/span>(ex){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(ex!=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;unwind&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> ex}}}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cancel&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;_pthread_self&amp;quot;&lt;/span>]()){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_exit&amp;quot;&lt;/span>](-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>)}}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>target&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;setimmediate&amp;quot;&lt;/span>){}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;checkMailbox&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(initializedJS){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;checkMailbox&amp;quot;&lt;/span>]()}}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>err&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;worker.js received unknown command &amp;quot;&lt;/span>+e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>);&lt;span class=\&quot;hljs-title function_\&quot;>err&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>)}}&lt;span class=\&quot;hljs-keyword\&quot;>catch&lt;/span>(ex){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_crashed&amp;quot;&lt;/span>]){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_crashed&amp;quot;&lt;/span>]()}&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> ex}}self.&lt;span class=\&quot;hljs-property\&quot;>onmessage&lt;/span>=handleMessage;\n&quot;,&quot;numLines&quot;:2}}"><div class="flex relative bg-white font-mono text-sm leading-6"><div class="py-4 border-b border-x border-slate-300 bg-slate-100 text-right select-none"><div><div class="relative"><a id="L1" href="#L1" class="inline-block w-full pl-4 sm:pl-6 pr-2 text-slate-600 hover:text-slate-950 outline-none">1</a></div></div><div><div class="relative"><a id="L2" href="#L2" class="inline-block w-full pl-4 sm:pl-6 pr-2 text-slate-600 hover:text-slate-950 outline-none">2</a></div></div></div><div class="py-4 pl-4 pr-6 relative border-b border-r border-slate-300 flex-grow whitespace-pre overflow-x-auto" style="tab-size:2;"><span class="hljs-meta">&quot;use strict&quot;</span>;<span class="hljs-keyword">var</span> <span class="hljs-title class_">Module</span>={};<span class="hljs-keyword">var</span> <span class="hljs-variable constant_">ENVIRONMENT_IS_NODE</span>=<span class="hljs-keyword">typeof</span> process==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;<span class="hljs-keyword">typeof</span> process.<span class="hljs-property">versions</span>==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;<span class="hljs-keyword">typeof</span> process.<span class="hljs-property">versions</span>.<span class="hljs-property">node</span>==<span class="hljs-string">&quot;string&quot;</span>;<span class="hljs-keyword">if</span>(<span class="hljs-variable constant_">ENVIRONMENT_IS_NODE</span>){<span class="hljs-keyword">var</span> nodeWorkerThreads=<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;worker_threads&quot;</span>);<span class="hljs-keyword">var</span> parentPort=nodeWorkerThreads.<span class="hljs-property">parentPort</span>;parentPort.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-function"><span class="hljs-params">data</span>=&gt;</span><span class="hljs-title function_">onmessage</span>({<span class="hljs-attr">data</span>:data}));<span class="hljs-keyword">var</span> fs=<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">global</span>,{<span class="hljs-attr">self</span>:<span class="hljs-variable language_">global</span>,<span class="hljs-attr">require</span>:<span class="hljs-built_in">require</span>,<span class="hljs-title class_">Module</span>:<span class="hljs-title class_">Module</span>,<span class="hljs-attr">location</span>:{<span class="hljs-attr">href</span>:__filename},<span class="hljs-title class_">Worker</span>:nodeWorkerThreads.<span class="hljs-property">Worker</span>,<span class="hljs-attr">importScripts</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>){(<span class="hljs-number">0</span>,<span class="hljs-built_in">eval</span>)(fs.<span class="hljs-title function_">readFileSync</span>(f,<span class="hljs-string">&quot;utf8&quot;</span>)+<span class="hljs-string">&quot;//# sourceURL=&quot;</span>+f)},<span class="hljs-attr">postMessage</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>){parentPort.<span class="hljs-title function_">postMessage</span>(msg)},<span class="hljs-attr">performance</span>:<span class="hljs-variable language_">global</span>.<span class="hljs-property">performance</span>||{<span class="hljs-attr">now</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()}}})}<span class="hljs-keyword">var</span> initializedJS=<span class="hljs-literal">false</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">threadPrintErr</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">var</span> text=<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot; &quot;</span>);<span class="hljs-keyword">if</span>(<span class="hljs-variable constant_">ENVIRONMENT_IS_NODE</span>){fs.<span class="hljs-title function_">writeSync</span>(<span class="hljs-number">2</span>,text+<span class="hljs-string">&quot;\n&quot;</span>);<span class="hljs-keyword">return</span>}<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(text)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">threadAlert</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">var</span> text=<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot; &quot;</span>);<span class="hljs-title function_">postMessage</span>({<span class="hljs-attr">cmd</span>:<span class="hljs-string">&quot;alert&quot;</span>,<span class="hljs-attr">text</span>:text,<span class="hljs-attr">threadId</span>:<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;_pthread_self&quot;</span>]()})}<span class="hljs-keyword">var</span> err=threadPrintErr;self.<span class="hljs-property">alert</span>=threadAlert;<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;instantiateWasm&quot;</span>]=<span class="hljs-function">(<span class="hljs-params">info,receiveInstance</span>)=&gt;</span>{<span class="hljs-keyword">var</span> <span class="hljs-variable language_">module</span>=<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmModule&quot;</span>];<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmModule&quot;</span>]=<span class="hljs-literal">null</span>;<span class="hljs-keyword">var</span> instance=<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title class_">Instance</span>(<span class="hljs-variable language_">module</span>,info);<span class="hljs-keyword">return</span> <span class="hljs-title function_">receiveInstance</span>(instance)};self.<span class="hljs-property">onunhandledrejection</span>=<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>{<span class="hljs-keyword">throw</span> e.<span class="hljs-property">reason</span>??e};<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">try</span>{<span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>===<span class="hljs-string">&quot;load&quot;</span>){<span class="hljs-keyword">let</span> messageQueue=[];self.<span class="hljs-property">onmessage</span>=<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>messageQueue.<span class="hljs-title function_">push</span>(e);self.<span class="hljs-property">startWorker</span>=<span class="hljs-function"><span class="hljs-params">instance</span>=&gt;</span>{<span class="hljs-title class_">Module</span>=instance;<span class="hljs-title function_">postMessage</span>({<span class="hljs-string">&quot;cmd&quot;</span>:<span class="hljs-string">&quot;loaded&quot;</span>});<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> msg <span class="hljs-keyword">of</span> messageQueue){<span class="hljs-title function_">handleMessage</span>(msg)}self.<span class="hljs-property">onmessage</span>=handleMessage};<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmModule&quot;</span>]=e.<span class="hljs-property">data</span>.<span class="hljs-property">wasmModule</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> handler <span class="hljs-keyword">of</span> e.<span class="hljs-property">data</span>.<span class="hljs-property">handlers</span>){<span class="hljs-title class_">Module</span>[handler]=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-title function_">postMessage</span>({<span class="hljs-attr">cmd</span>:<span class="hljs-string">&quot;callHandler&quot;</span>,<span class="hljs-attr">handler</span>:handler,<span class="hljs-attr">args</span>:[...<span class="hljs-variable language_">arguments</span>]})}}<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmMemory&quot;</span>]=e.<span class="hljs-property">data</span>.<span class="hljs-property">wasmMemory</span>;<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;buffer&quot;</span>]=<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmMemory&quot;</span>].<span class="hljs-property">buffer</span>;<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;ENVIRONMENT_IS_PTHREAD&quot;</span>]=<span class="hljs-literal">true</span>;(e.<span class="hljs-property">data</span>.<span class="hljs-property">urlOrBlob</span>?<span class="hljs-keyword">import</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">urlOrBlob</span>):<span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./ffmpeg-core.js&quot;</span>)).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">exports</span>=&gt;</span><span class="hljs-built_in">exports</span>.<span class="hljs-title function_">default</span>(<span class="hljs-title class_">Module</span>))}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>===<span class="hljs-string">&quot;run&quot;</span>){<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_init&quot;</span>](e.<span class="hljs-property">data</span>.<span class="hljs-property">pthread_ptr</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_mailbox_await&quot;</span>](e.<span class="hljs-property">data</span>.<span class="hljs-property">pthread_ptr</span>);<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;establishStackSpace&quot;</span>]();<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;PThread&quot;</span>].<span class="hljs-title function_">receiveObjectTransfer</span>(e.<span class="hljs-property">data</span>);<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;PThread&quot;</span>].<span class="hljs-title function_">threadInitTLS</span>();<span class="hljs-keyword">if</span>(!initializedJS){initializedJS=<span class="hljs-literal">true</span>}<span class="hljs-keyword">try</span>{<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;invokeEntryPoint&quot;</span>](e.<span class="hljs-property">data</span>.<span class="hljs-property">start_routine</span>,e.<span class="hljs-property">data</span>.<span class="hljs-property">arg</span>)}<span class="hljs-keyword">catch</span>(ex){<span class="hljs-keyword">if</span>(ex!=<span class="hljs-string">&quot;unwind&quot;</span>){<span class="hljs-keyword">throw</span> ex}}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>===<span class="hljs-string">&quot;cancel&quot;</span>){<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;_pthread_self&quot;</span>]()){<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_exit&quot;</span>](-<span class="hljs-number">1</span>)}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">target</span>===<span class="hljs-string">&quot;setimmediate&quot;</span>){}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>===<span class="hljs-string">&quot;checkMailbox&quot;</span>){<span class="hljs-keyword">if</span>(initializedJS){<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;checkMailbox&quot;</span>]()}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>){<span class="hljs-title function_">err</span>(<span class="hljs-string">&quot;worker.js received unknown command &quot;</span>+e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>);<span class="hljs-title function_">err</span>(e.<span class="hljs-property">data</span>)}}<span class="hljs-keyword">catch</span>(ex){<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_crashed&quot;</span>]){<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_crashed&quot;</span>]()}<span class="hljs-keyword">throw</span> ex}}self.<span class="hljs-property">onmessage</span>=handleMessage;
dist\ffmpeg\ffmpeg.js:!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FFmpegWASM=t():e.FFmpegWASM=t()}(self,(()=>(()=>{"use strict";var e={m:{},d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},u:e=>e+".ffmpeg.js"};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var s=r.getElementsByTagName("script");if(s.length)for(var a=s.length-1;a>-1&&!t;)t=s[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.b=document.baseURI||self.location.href;var t,r={};e.r(r),e.d(r,{FFmpeg:()=>i}),function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG"}(t||(t={}));const s=(()=>{let e=0;return()=>e++})(),a=(new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),o=new Error("called FFmpeg.terminate()");new Error("failed to import ffmpeg-core.js");class i{#e=null;#t={};#r={};#s=[];#a=[];loaded=!1;#o=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:r,data:s}})=>{switch(r){case t.LOAD:this.loaded=!0,this.#t[e](s);break;case t.EXEC:case t.WRITE_FILE:case t.READ_FILE:case t.DELETE_FILE:case t.RENAME:case t.CREATE_DIR:case t.LIST_DIR:case t.DELETE_DIR:this.#t[e](s);break;case t.LOG:this.#s.forEach((e=>e(s)));break;case t.PROGRESS:this.#a.forEach((e=>e(s)));break;case t.ERROR:this.#r[e](s)}delete this.#t[e],delete this.#r[e]})};#i=({type:e,data:t},r=[])=>this.#e?new Promise(((a,o)=>{const i=s();this.#e&&this.#e.postMessage({id:i,type:e,data:t},r),this.#t[i]=a,this.#r[i]=o})):Promise.reject(a);on(e,t){"log"===e?this.#s.push(t):"progress"===e&&this.#a.push(t)}off(e,t){"log"===e?this.#s=this.#s.filter((e=>e!==t)):"progress"===e&&(this.#a=this.#a.filter((e=>e!==t)))}load=(r={})=>(this.#e||(this.#e=new Worker(new URL(e.p+e.u(814),e.b),{type:void 0}),this.#o()),this.#i({type:t.LOAD,data:r}));exec=(e,r=-1)=>this.#i({type:t.EXEC,data:{args:e,timeout:r}});terminate=()=>{const e=Object.keys(this.#r);for(const t of e)this.#r[t](o),delete this.#r[t],delete this.#t[t];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,r)=>{const s=[];return r instanceof Uint8Array&&s.push(r.buffer),this.#i({type:t.WRITE_FILE,data:{path:e,data:r}},s)};readFile=(e,r="binary")=>this.#i({type:t.READ_FILE,data:{path:e,encoding:r}});deleteFile=e=>this.#i({type:t.DELETE_FILE,data:{path:e}});rename=(e,r)=>this.#i({type:t.RENAME,data:{oldPath:e,newPath:r}});createDir=e=>this.#i({type:t.CREATE_DIR,data:{path:e}});listDir=e=>this.#i({type:t.LIST_DIR,data:{path:e}});deleteDir=e=>this.#i({type:t.DELETE_DIR,data:{path:e}})}return r})()));
dist\ffmpeg-core.worker.js:gtag('config', 'UA-140352188-1');</script></head><body><header class="border-b border-slate-300 bg-slate-100 text-slate-950"><div class="p-4 mx-auto flex justify-between items-center lg:max-w-screen-xl"><h1 class="text-2xl font-bold inline-block"><a href="https://unpkg.com">UNPKG</a></h1><span class="inline-block h-full"><a href="https://github.com/unpkg"><svg aria-hidden="true" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path fill-rule="evenodd" d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z" clip-rule="evenodd"></path></svg></a></span></div></header><main class="px-4 pb-24 mx-auto lg:max-w-screen-xl lg:pb-44"><header class="pt-6 pb-4 lg:pt-16"><div class="mb-6 flex justify-between items-center"><h1 class="text-black text-3xl leading-tight font-semibold">@ffmpeg/core-mt</h1><div class="text-right w-48"><span>Version: </span><span data-hydrate="{&quot;key&quot;:&quot;VersionSelector&quot;,&quot;props&quot;:{&quot;availableTags&quot;:{&quot;next&quot;:&quot;0.12.2-alpha.3&quot;,&quot;latest&quot;:&quot;0.12.10&quot;},&quot;availableVersions&quot;:[&quot;0.12.10&quot;,&quot;0.12.9&quot;,&quot;0.12.8&quot;,&quot;0.12.6&quot;,&quot;0.12.5&quot;,&quot;0.12.4&quot;,&quot;0.12.3&quot;,&quot;0.12.2&quot;,&quot;0.12.2-alpha.3&quot;,&quot;0.12.2-alpha.2&quot;,&quot;0.12.2-alpha.1&quot;,&quot;0.12.1&quot;],&quot;currentVersion&quot;:&quot;0.12.6&quot;,&quot;pathnameFormat&quot;:&quot;/@ffmpeg/core-mt@%s/files/dist/esm/ffmpeg-core.worker.js&quot;,&quot;class&quot;:&quot;w-28 p-1 border border-slate-300 bg-slate-100 text-sm&quot;}}"><select name="version" class="w-28 p-1 border border-slate-300 bg-slate-100 text-sm"><optgroup label="Tags"><option value="0.12.10">latest (0.12.10)</option><option value="0.12.2-alpha.3">next (0.12.2-alpha.3)</option></optgroup><optgroup label="Versions"><option value="0.12.10">0.12.10</option><option value="0.12.9">0.12.9</option><option value="0.12.8">0.12.8</option><option selected value="0.12.6">0.12.6</option><option value="0.12.5">0.12.5</option><option value="0.12.4">0.12.4</option><option value="0.12.3">0.12.3</option><option value="0.12.2">0.12.2</option><option value="0.12.2-alpha.3">0.12.2-alpha.3</option><option value="0.12.2-alpha.2">0.12.2-alpha.2</option><option value="0.12.2-alpha.1">0.12.2-alpha.1</option><option value="0.12.1">0.12.1</option></optgroup></select></span></div></div><div class="mt-2"><p class="mb-3 leading-tight"><span>FFmpeg WebAssembly version (multi thread)</span></p><div class="lg:hidden"><p class="mt-1 text-sm leading-4"><a href="https://github.com/ffmpegwasm/ffmpeg.wasm#readme" title="Visit the @ffmpeg/core-mt website" class="inline-flex items-center hover:text-slate-950 hover:underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" class="w-6 h-6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.213 9.787a3.391 3.391 0 0 0-4.795 0l-3.425 3.426a3.39 3.39 0 0 0 4.795 4.794l.321-.304m-.321-4.49a3.39 3.39 0 0 0 4.795 0l3.424-3.426a3.39 3.39 0 0 0-4.794-4.795l-1.028.961"></path></svg><span class="ml-1">github.com/ffmpegwasm/ffmpeg.wasm</span></a></p><p class="mt-1 text-sm leading-4"><a href="https://github.com/ffmpegwasm/ffmpeg.wasm" title="View the @ffmpeg/core-mt repository on GitHub" class="inline-flex items-center hover:text-slate-950 hover:underline"><svg aria-hidden="true" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path fill-rule="evenodd" d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z" clip-rule="evenodd"></path></svg><span class="ml-1">ffmpegwasm/ffmpeg.wasm</span></a></p></div></div></header><nav class="py-2"><span><a href="https://app.unpkg.com/@ffmpeg/core-mt@0.12.6" class="text-blue-600 hover:underline">@ffmpeg/core-mt</a></span><span> / </span><span><a href="https://app.unpkg.com/@ffmpeg/core-mt@0.12.6/files/dist" class="text-blue-600 hover:underline">dist</a></span><span> / </span><span><a href="https://app.unpkg.com/@ffmpeg/core-mt@0.12.6/files/dist/esm" class="text-blue-600 hover:underline">esm</a></span><span> / </span><span>ffmpeg-core.worker.js</span></nav><div class="p-3 border border-slate-300 bg-slate-100 text-sm flex justify-between select-none"><div class="w-64"><span><span>2 lines </span><span>(1 loc) </span><span>• </span></span><span>2.82 kB</span></div><div class="hidden flex-grow sm:block text-center">JavaScript</div><div class="w-64 hidden sm:block text-right"><a href="https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm/ffmpeg-core.worker.js" class="py-1 px-2 border border-slate-300 bg-slate-100 hover:bg-slate-200 rounded-sm">View Raw</a></div></div><div data-hydrate="{&quot;key&quot;:&quot;CodeViewer&quot;,&quot;props&quot;:{&quot;html&quot;:&quot;&lt;span class=\&quot;hljs-meta\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>={};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-variable constant_\&quot;>ENVIRONMENT_IS_NODE&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> process==&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;object&amp;quot;&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> process.&lt;span class=\&quot;hljs-property\&quot;>versions&lt;/span>==&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;object&amp;quot;&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> process.&lt;span class=\&quot;hljs-property\&quot;>versions&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>node&lt;/span>==&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;string&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-variable constant_\&quot;>ENVIRONMENT_IS_NODE&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> nodeWorkerThreads=&lt;span class=\&quot;hljs-built_in\&quot;>require&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;worker_threads&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> parentPort=nodeWorkerThreads.&lt;span class=\&quot;hljs-property\&quot;>parentPort&lt;/span>;parentPort.&lt;span class=\&quot;hljs-title function_\&quot;>on&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;message&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>data&lt;/span>=&amp;gt;&lt;/span>&lt;span class=\&quot;hljs-title function_\&quot;>onmessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>data&lt;/span>:data}));&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> fs=&lt;span class=\&quot;hljs-built_in\&quot;>require&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;fs&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>assign&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>global&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>self&lt;/span>:&lt;span class=\&quot;hljs-variable language_\&quot;>global&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>require&lt;/span>:&lt;span class=\&quot;hljs-built_in\&quot;>require&lt;/span>,&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>location&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>href&lt;/span>:__filename},&lt;span class=\&quot;hljs-title class_\&quot;>Worker&lt;/span>:nodeWorkerThreads.&lt;span class=\&quot;hljs-property\&quot;>Worker&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>importScripts&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>f&lt;/span>){(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-built_in\&quot;>eval&lt;/span>)(fs.&lt;span class=\&quot;hljs-title function_\&quot;>readFileSync&lt;/span>(f,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;utf8&amp;quot;&lt;/span>)+&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;//# sourceURL=&amp;quot;&lt;/span>+f)},&lt;span class=\&quot;hljs-attr\&quot;>postMessage&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>msg&lt;/span>){parentPort.&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>(msg)},&lt;span class=\&quot;hljs-attr\&quot;>performance&lt;/span>:&lt;span class=\&quot;hljs-variable language_\&quot;>global&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>performance&lt;/span>||{&lt;span class=\&quot;hljs-attr\&quot;>now&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>now&lt;/span>()}}})}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> initializedJS=&lt;span class=\&quot;hljs-literal\&quot;>false&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>threadPrintErr&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> text=&lt;span class=\&quot;hljs-title class_\&quot;>Array&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>&lt;span class=\&quot;hljs-keyword\&quot;>prototype&lt;/span>&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>slice&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>call&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>join&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot; &amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-variable constant_\&quot;>ENVIRONMENT_IS_NODE&lt;/span>){fs.&lt;span class=\&quot;hljs-title function_\&quot;>writeSync&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>,text+&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;\\n&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>}&lt;span class=\&quot;hljs-variable language_\&quot;>console&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>error&lt;/span>(text)}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>threadAlert&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> text=&lt;span class=\&quot;hljs-title class_\&quot;>Array&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>&lt;span class=\&quot;hljs-keyword\&quot;>prototype&lt;/span>&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>slice&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>call&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>join&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot; &amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>cmd&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;alert&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>text&lt;/span>:text,&lt;span class=\&quot;hljs-attr\&quot;>threadId&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;_pthread_self&amp;quot;&lt;/span>]()})}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> err=threadPrintErr;self.&lt;span class=\&quot;hljs-property\&quot;>alert&lt;/span>=threadAlert;&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;instantiateWasm&amp;quot;&lt;/span>]=&lt;span class=\&quot;hljs-function\&quot;>(&lt;span class=\&quot;hljs-params\&quot;>info,receiveInstance&lt;/span>)=&amp;gt;&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-variable language_\&quot;>module&lt;/span>=&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmModule&amp;quot;&lt;/span>];&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmModule&amp;quot;&lt;/span>]=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> instance=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>WebAssembly&lt;/span>.&lt;span class=\&quot;hljs-title class_\&quot;>Instance&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>module&lt;/span>,info);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>receiveInstance&lt;/span>(instance)};self.&lt;span class=\&quot;hljs-property\&quot;>onunhandledrejection&lt;/span>=&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>=&amp;gt;&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>reason&lt;/span>??e};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>handleMessage&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>try&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;load&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>let&lt;/span> messageQueue=[];self.&lt;span class=\&quot;hljs-property\&quot;>onmessage&lt;/span>=&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>=&amp;gt;&lt;/span>messageQueue.&lt;span class=\&quot;hljs-title function_\&quot;>push&lt;/span>(e);self.&lt;span class=\&quot;hljs-property\&quot;>startWorker&lt;/span>=&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>instance&lt;/span>=&amp;gt;&lt;/span>{&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>=instance;&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cmd&amp;quot;&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;loaded&amp;quot;&lt;/span>});&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>let&lt;/span> msg &lt;span class=\&quot;hljs-keyword\&quot;>of&lt;/span> messageQueue){&lt;span class=\&quot;hljs-title function_\&quot;>handleMessage&lt;/span>(msg)}self.&lt;span class=\&quot;hljs-property\&quot;>onmessage&lt;/span>=handleMessage};&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmModule&amp;quot;&lt;/span>]=e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>wasmModule&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>const&lt;/span> handler &lt;span class=\&quot;hljs-keyword\&quot;>of&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>handlers&lt;/span>){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[handler]=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>cmd&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;callHandler&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>handler&lt;/span>:handler,&lt;span class=\&quot;hljs-attr\&quot;>args&lt;/span>:[...&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>]})}}&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmMemory&amp;quot;&lt;/span>]=e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>wasmMemory&lt;/span>;&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;buffer&amp;quot;&lt;/span>]=&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wasmMemory&amp;quot;&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>;&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;ENVIRONMENT_IS_PTHREAD&amp;quot;&lt;/span>]=&lt;span class=\&quot;hljs-literal\&quot;>true&lt;/span>;(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>urlOrBlob&lt;/span>?&lt;span class=\&quot;hljs-keyword\&quot;>import&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>urlOrBlob&lt;/span>):&lt;span class=\&quot;hljs-keyword\&quot;>import&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;./ffmpeg-core.js&amp;quot;&lt;/span>)).&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-function\&quot;>&lt;span class=\&quot;hljs-params\&quot;>exports&lt;/span>=&amp;gt;&lt;/span>&lt;span class=\&quot;hljs-built_in\&quot;>exports&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>default&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>))}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;run&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_init&amp;quot;&lt;/span>](e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>pthread_ptr&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>);&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_mailbox_await&amp;quot;&lt;/span>](e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>pthread_ptr&lt;/span>);&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;establishStackSpace&amp;quot;&lt;/span>]();&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;PThread&amp;quot;&lt;/span>].&lt;span class=\&quot;hljs-title function_\&quot;>receiveObjectTransfer&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>);&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;PThread&amp;quot;&lt;/span>].&lt;span class=\&quot;hljs-title function_\&quot;>threadInitTLS&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!initializedJS){initializedJS=&lt;span class=\&quot;hljs-literal\&quot;>true&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>try&lt;/span>{&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;invokeEntryPoint&amp;quot;&lt;/span>](e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>start_routine&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>arg&lt;/span>)}&lt;span class=\&quot;hljs-keyword\&quot;>catch&lt;/span>(ex){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(ex!=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;unwind&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> ex}}}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cancel&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;_pthread_self&amp;quot;&lt;/span>]()){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_exit&amp;quot;&lt;/span>](-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>)}}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>target&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;setimmediate&amp;quot;&lt;/span>){}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>===&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;checkMailbox&amp;quot;&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(initializedJS){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;checkMailbox&amp;quot;&lt;/span>]()}}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>err&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;worker.js received unknown command &amp;quot;&lt;/span>+e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cmd&lt;/span>);&lt;span class=\&quot;hljs-title function_\&quot;>err&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>)}}&lt;span class=\&quot;hljs-keyword\&quot;>catch&lt;/span>(ex){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_crashed&amp;quot;&lt;/span>]){&lt;span class=\&quot;hljs-title class_\&quot;>Module&lt;/span>[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__emscripten_thread_crashed&amp;quot;&lt;/span>]()}&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> ex}}self.&lt;span class=\&quot;hljs-property\&quot;>onmessage&lt;/span>=handleMessage;\n&quot;,&quot;numLines&quot;:2}}"><div class="flex relative bg-white font-mono text-sm leading-6"><div class="py-4 border-b border-x border-slate-300 bg-slate-100 text-right select-none"><div><div class="relative"><a id="L1" href="#L1" class="inline-block w-full pl-4 sm:pl-6 pr-2 text-slate-600 hover:text-slate-950 outline-none">1</a></div></div><div><div class="relative"><a id="L2" href="#L2" class="inline-block w-full pl-4 sm:pl-6 pr-2 text-slate-600 hover:text-slate-950 outline-none">2</a></div></div></div><div class="py-4 pl-4 pr-6 relative border-b border-r border-slate-300 flex-grow whitespace-pre overflow-x-auto" style="tab-size:2;"><span class="hljs-meta">&quot;use strict&quot;</span>;<span class="hljs-keyword">var</span> <span class="hljs-title class_">Module</span>={};<span class="hljs-keyword">var</span> <span class="hljs-variable constant_">ENVIRONMENT_IS_NODE</span>=<span class="hljs-keyword">typeof</span> process==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;<span class="hljs-keyword">typeof</span> process.<span class="hljs-property">versions</span>==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;<span class="hljs-keyword">typeof</span> process.<span class="hljs-property">versions</span>.<span class="hljs-property">node</span>==<span class="hljs-string">&quot;string&quot;</span>;<span class="hljs-keyword">if</span>(<span class="hljs-variable constant_">ENVIRONMENT_IS_NODE</span>){<span class="hljs-keyword">var</span> nodeWorkerThreads=<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;worker_threads&quot;</span>);<span class="hljs-keyword">var</span> parentPort=nodeWorkerThreads.<span class="hljs-property">parentPort</span>;parentPort.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-function"><span class="hljs-params">data</span>=&gt;</span><span class="hljs-title function_">onmessage</span>({<span class="hljs-attr">data</span>:data}));<span class="hljs-keyword">var</span> fs=<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">global</span>,{<span class="hljs-attr">self</span>:<span class="hljs-variable language_">global</span>,<span class="hljs-attr">require</span>:<span class="hljs-built_in">require</span>,<span class="hljs-title class_">Module</span>:<span class="hljs-title class_">Module</span>,<span class="hljs-attr">location</span>:{<span class="hljs-attr">href</span>:__filename},<span class="hljs-title class_">Worker</span>:nodeWorkerThreads.<span class="hljs-property">Worker</span>,<span class="hljs-attr">importScripts</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>){(<span class="hljs-number">0</span>,<span class="hljs-built_in">eval</span>)(fs.<span class="hljs-title function_">readFileSync</span>(f,<span class="hljs-string">&quot;utf8&quot;</span>)+<span class="hljs-string">&quot;//# sourceURL=&quot;</span>+f)},<span class="hljs-attr">postMessage</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>){parentPort.<span class="hljs-title function_">postMessage</span>(msg)},<span class="hljs-attr">performance</span>:<span class="hljs-variable language_">global</span>.<span class="hljs-property">performance</span>||{<span class="hljs-attr">now</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()}}})}<span class="hljs-keyword">var</span> initializedJS=<span class="hljs-literal">false</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">threadPrintErr</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">var</span> text=<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot; &quot;</span>);<span class="hljs-keyword">if</span>(<span class="hljs-variable constant_">ENVIRONMENT_IS_NODE</span>){fs.<span class="hljs-title function_">writeSync</span>(<span class="hljs-number">2</span>,text+<span class="hljs-string">&quot;\n&quot;</span>);<span class="hljs-keyword">return</span>}<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(text)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">threadAlert</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">var</span> text=<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot; &quot;</span>);<span class="hljs-title function_">postMessage</span>({<span class="hljs-attr">cmd</span>:<span class="hljs-string">&quot;alert&quot;</span>,<span class="hljs-attr">text</span>:text,<span class="hljs-attr">threadId</span>:<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;_pthread_self&quot;</span>]()})}<span class="hljs-keyword">var</span> err=threadPrintErr;self.<span class="hljs-property">alert</span>=threadAlert;<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;instantiateWasm&quot;</span>]=<span class="hljs-function">(<span class="hljs-params">info,receiveInstance</span>)=&gt;</span>{<span class="hljs-keyword">var</span> <span class="hljs-variable language_">module</span>=<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmModule&quot;</span>];<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmModule&quot;</span>]=<span class="hljs-literal">null</span>;<span class="hljs-keyword">var</span> instance=<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title class_">Instance</span>(<span class="hljs-variable language_">module</span>,info);<span class="hljs-keyword">return</span> <span class="hljs-title function_">receiveInstance</span>(instance)};self.<span class="hljs-property">onunhandledrejection</span>=<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>{<span class="hljs-keyword">throw</span> e.<span class="hljs-property">reason</span>??e};<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">try</span>{<span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>===<span class="hljs-string">&quot;load&quot;</span>){<span class="hljs-keyword">let</span> messageQueue=[];self.<span class="hljs-property">onmessage</span>=<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>messageQueue.<span class="hljs-title function_">push</span>(e);self.<span class="hljs-property">startWorker</span>=<span class="hljs-function"><span class="hljs-params">instance</span>=&gt;</span>{<span class="hljs-title class_">Module</span>=instance;<span class="hljs-title function_">postMessage</span>({<span class="hljs-string">&quot;cmd&quot;</span>:<span class="hljs-string">&quot;loaded&quot;</span>});<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> msg <span class="hljs-keyword">of</span> messageQueue){<span class="hljs-title function_">handleMessage</span>(msg)}self.<span class="hljs-property">onmessage</span>=handleMessage};<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmModule&quot;</span>]=e.<span class="hljs-property">data</span>.<span class="hljs-property">wasmModule</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> handler <span class="hljs-keyword">of</span> e.<span class="hljs-property">data</span>.<span class="hljs-property">handlers</span>){<span class="hljs-title class_">Module</span>[handler]=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-title function_">postMessage</span>({<span class="hljs-attr">cmd</span>:<span class="hljs-string">&quot;callHandler&quot;</span>,<span class="hljs-attr">handler</span>:handler,<span class="hljs-attr">args</span>:[...<span class="hljs-variable language_">arguments</span>]})}}<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmMemory&quot;</span>]=e.<span class="hljs-property">data</span>.<span class="hljs-property">wasmMemory</span>;<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;buffer&quot;</span>]=<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;wasmMemory&quot;</span>].<span class="hljs-property">buffer</span>;<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;ENVIRONMENT_IS_PTHREAD&quot;</span>]=<span class="hljs-literal">true</span>;(e.<span class="hljs-property">data</span>.<span class="hljs-property">urlOrBlob</span>?<span class="hljs-keyword">import</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">urlOrBlob</span>):<span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./ffmpeg-core.js&quot;</span>)).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">exports</span>=&gt;</span><span class="hljs-built_in">exports</span>.<span class="hljs-title function_">default</span>(<span class="hljs-title class_">Module</span>))}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>===<span class="hljs-string">&quot;run&quot;</span>){<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_init&quot;</span>](e.<span class="hljs-property">data</span>.<span class="hljs-property">pthread_ptr</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_mailbox_await&quot;</span>](e.<span class="hljs-property">data</span>.<span class="hljs-property">pthread_ptr</span>);<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;establishStackSpace&quot;</span>]();<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;PThread&quot;</span>].<span class="hljs-title function_">receiveObjectTransfer</span>(e.<span class="hljs-property">data</span>);<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;PThread&quot;</span>].<span class="hljs-title function_">threadInitTLS</span>();<span class="hljs-keyword">if</span>(!initializedJS){initializedJS=<span class="hljs-literal">true</span>}<span class="hljs-keyword">try</span>{<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;invokeEntryPoint&quot;</span>](e.<span class="hljs-property">data</span>.<span class="hljs-property">start_routine</span>,e.<span class="hljs-property">data</span>.<span class="hljs-property">arg</span>)}<span class="hljs-keyword">catch</span>(ex){<span class="hljs-keyword">if</span>(ex!=<span class="hljs-string">&quot;unwind&quot;</span>){<span class="hljs-keyword">throw</span> ex}}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>===<span class="hljs-string">&quot;cancel&quot;</span>){<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;_pthread_self&quot;</span>]()){<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_exit&quot;</span>](-<span class="hljs-number">1</span>)}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">target</span>===<span class="hljs-string">&quot;setimmediate&quot;</span>){}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>===<span class="hljs-string">&quot;checkMailbox&quot;</span>){<span class="hljs-keyword">if</span>(initializedJS){<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;checkMailbox&quot;</span>]()}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>){<span class="hljs-title function_">err</span>(<span class="hljs-string">&quot;worker.js received unknown command &quot;</span>+e.<span class="hljs-property">data</span>.<span class="hljs-property">cmd</span>);<span class="hljs-title function_">err</span>(e.<span class="hljs-property">data</span>)}}<span class="hljs-keyword">catch</span>(ex){<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_crashed&quot;</span>]){<span class="hljs-title class_">Module</span>[<span class="hljs-string">&quot;__emscripten_thread_crashed&quot;</span>]()}<span class="hljs-keyword">throw</span> ex}}self.<span class="hljs-property">onmessage</span>=handleMessage;
